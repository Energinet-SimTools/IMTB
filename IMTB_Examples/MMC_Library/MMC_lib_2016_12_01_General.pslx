<project name="VSC_MMC_Lib" Target="Library" version="4.6.1" schema="">
  <paramlist name="Settings">
    <param name="creator" value="student.student" />
    <param name="time_duration" value="0.5" />
    <param name="time_step" value="50" />
    <param name="sample_step" value="250" />
    <param name="chatter_threshold" value=".001" />
    <param name="branch_threshold" value=".0005" />
    <param name="latency_count" value="100" />
    <param name="StartType" value="0" />
    <param name="PlotType" value="0" />
    <param name="output_filename" value="noname.out" />
    <param name="SnapType" value="0" />
    <param name="SnapTime" value="0.3" />
    <param name="snapshot_filename" value="noname.snp" />
    <param name="MrunType" value="0" />
    <param name="Mruns" value="10" />
    <param name="multirun_filename" value="mrun.out" />
    <param name="Scenario" value="" />
    <param name="Advanced" value="10239" />
    <param name="Options" value="0" />
    <param name="Build" value="18" />
    <param name="Warn" value="0" />
    <param name="Check" value="0" />
    <param name="description" value="MY PSCAD LIBRARIES" />
    <param name="revisor" value="georgew, 1483468606" />
    <param name="labels" value="" />
    <param name="Source" value="" />
    <param name="Preprocessor" value="" />
  </paramlist>
  <definitions>
    <Definition classid="UserCmpDefn" name="MovAvg" group="" url="" version="" build="" crc="80897745" instances="0" key="" view="false" date="0" id="1957169451">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Frequency" name="Freq" group="" unit="Hz" min="-1e+308" max="+1e+308" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[50.0 [Hz]]]></value>
            <cond />
            <help />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200" size="2">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Transfer" name="B" x="36" y="0" dim="1" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="A" x="-36" y="0" dim="1" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-24" y="-12" width="49" height="23" stroke="Navy" stroke-width="0.4" stroke-dasharray="none" fill-style="Hollow" fill-fg="Black" fill-bg="Black" />
        <line x1="-36" y1="0" x2="-25" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-29" y1="-5" x2="-24" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-29" y1="5" x2="-24" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="36" y1="0" x2="25" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-16" y1="-2" x2="-9" y2="-6" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-9" y1="-6" x2="-5" y2="-5" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-5" y1="-5" x2="-1" y2="-1" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-1" y1="-1" x2="6" y2="-3" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="6" y1="-3" x2="12" y2="1" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="12" y1="1" x2="18" y2="-2" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-8" y1="-4" x2="18" y2="0" stroke="Navy" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-8" y1="-1" x2="-8" y2="-5" stroke="Navy" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="18" y1="-2" x2="18" y2="3" stroke="Navy" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-19" y1="-4" x2="-16" y2="-2" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[      ! Running moving average
      #STORAGE REAL:1
      #LOCAL REAL RVD1_1
      ! RVD1_1 --> number of points
      RVD1_1 = 1.0/$Freq/DELT
      IF(TIMEZERO) THEN
          STORF(NSTORF) = 0.0
      ENDIF
      $B = ((RVD1_1-1.0)*STORF(NSTORF) + $A)/RVD1_1
      STORF(NSTORF) = $B
      NSTORF = NSTORF + 1]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="PI_AntiWindUp" group="" url="" version="" build="" crc="107634540" instances="10" key="" view="false" date="1480614212" id="1840537554">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Name" name="Name" group="" type="Text" helpmode="Append" allowemptystr="True">
            <value />
            <cond />
            <help />
            <regex />
            <error_msg />
          </parameter>
          <parameter desc="Proportional gain Kp" name="Kp" group="PI parameters" unit="" min="0" max="+1e+308" content_type="Variable" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[1]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Integrator time constant" name="Ti" group="PI parameters" unit="s" min="1e-20" max="+1e+308" content_type="Variable" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[0.01 [s]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Anti wind-up gain" name="Kaw" group="PI parameters" unit="" min="0" max="+1e+308" content_type="Variable" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[1]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Maximum output limit" name="MaxOut" group="Limits" unit="" min="-1e308" max="+1e+308" content_type="Variable" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[100]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Minimum output limit" name="MinOut" group="Limits" unit="" min="-1e+308" max="+1e+308" content_type="Variable" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[-100]]></value>
            <cond />
            <help />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Transfer" name="In" x="-36" y="0" dim="1" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Out" x="36" y="0" dim="1" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="frz" x="0" y="36" dim="1" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Rst" x="0" y="-36" dim="1" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-23" y="-19" width="42" height="42" stroke="Gray" stroke-width="0.2" stroke-dasharray="none" fill-style="Solid" fill-fg="Gray" fill-bg="Black" />
        <rect x="-21" y="-21" width="42" height="42" stroke="Blue" stroke-width="0.6" stroke-dasharray="none" fill-style="Solid" fill-fg="Aqua" fill-bg="Black" />
        <text x="0" y="1" stroke="black" font-size="small" text-anchor="Middle">PI</text>
        <line x1="-36" y1="0" x2="-21" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-26" y1="-5" x2="-21" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-26" y1="5" x2="-21" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-31" y="-6" stroke="black" font-size="small" text-anchor="Middle">In</text>
        <line x1="36" y1="0" x2="21" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="32" y="-5" stroke="black" font-size="small" text-anchor="Middle">Out</text>
        <line x1="0" y1="36" x2="0" y2="21" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-5" y1="26" x2="0" y2="21" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="5" y1="26" x2="0" y2="21" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-14" y="33" stroke="black" font-size="Small" text-anchor="Middle">Frz</text>
        <line x1="0" y1="-36" x2="0" y2="-21" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="5" y1="-26" x2="0" y2="-21" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-5" y1="-26" x2="0" y2="-21" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-15" y="-27" stroke="black" font-size="small" text-anchor="Middle">Rst</text>
      </svg>
      <schematic classid="UserCanvas" zoomlevel="6" scrollx="0" scrolly="180">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
          <param name="monitor_bus_voltage" value="0" />
          <param name="show_signal" value="0" />
          <param name="show_virtual" value="0" />
          <param name="show_sequence" value="0" />
          <param name="auto_sequence" value="1" />
          <param name="virtual_filter" value="" />
        </paramlist>
        <User classid="UserCmp" name="master:import" id="1459302285" x="288" y="270" w="69" h="22" z="70" orient="0" defn="master:import" link="-1" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="Name" value="In" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:import" id="541303075" x="756" y="522" w="76" h="22" z="90" orient="0" defn="master:import" link="-1" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="Name" value="Rst" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:export" id="1524663864" x="1098" y="270" w="74" h="21" z="200" orient="4" defn="master:export" link="-1" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="Name" value="Out" />
          </paramlist>
        </User>
        <User classid="UserCmp" defn="master:hardlimit" id="651490244" x="900" y="270" w="76" h="58" z="180" orient="0" link="-1" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="UL" value="MaxOut" />
            <param name="LL" value="MinOut" />
            <param name="COM" value="Hard_Limit" />
            <param name="Dim" value="1" />
            <param name="Limit" value="0" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:sumjct" id="1682037849" x="828" y="270" w="76" h="58" z="170" orient="6" link="-1" defn="master:sumjct" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="DPath" value="1" />
            <param name="A" value="0" />
            <param name="B" value="1" />
            <param name="C" value="0" />
            <param name="D" value="1" />
            <param name="E" value="0" />
            <param name="F" value="0" />
            <param name="G" value="0" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:gain" id="794189346" x="756" y="270" w="76" h="34" z="130" orient="0" link="-1" defn="master:gain" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="G" value="Kp" />
            <param name="COM" value="Gain" />
            <param name="Dim" value="1" />
          </paramlist>
        </User>
        <User classid="UserCmp" defn="master:integral" id="1290129552" x="792" y="450" w="76" h="70" z="160" orient="0" link="-1" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="Extrn" value="0" />
            <param name="Reset" value="1" />
            <param name="Mthd" value="0" />
            <param name="noname5" value="" />
            <param name="INTR" value="0" />
            <param name="INTCLR" value="0" />
            <param name="T" value="Ti" />
            <param name="Yo" value="0.0" />
            <param name="YRst" value="0.0" />
            <param name="YHi" value="MaxOut" />
            <param name="YLo" value="MinOut" />
          </paramlist>
        </User>
        <Wire classid="WireOrthogonal" name="" x="936" y="270" w="136" h="10" orient="0" id="540378876" layer="">
          <vertex x="0" y="0" />
          <vertex x="126" y="0" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="792" y="522" w="10" h="46" orient="0" id="1048767399" layer="">
          <vertex x="0" y="0" />
          <vertex x="0" y="-36" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="522" y="450" w="136" h="10" orient="0" id="1982316408" layer="">
          <vertex x="0" y="0" />
          <vertex x="126" y="0" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="324" y="270" w="100" h="10" orient="0" id="1420106627" layer="">
          <vertex x="0" y="0" />
          <vertex x="90" y="0" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="450" y="450" w="118" h="190" orient="0" id="180492573" layer="">
          <vertex x="0" y="0" />
          <vertex x="-108" y="0" />
          <vertex x="-108" y="-180" />
        </Wire>
        <Sticky classid="Sticky" x="18" y="396" w="198" h="54" colors="10526880, 15792890" id="1095543583" layer="">
          <paramlist>
            <param name="font" value="1" />
            <param name="align" value="0" />
            <param name="style" value="1" />
            <param name="fg_color" value="4210816" />
            <param name="bg_color" value="16777215" />
            <param name="arrows" value="0" />
            <param name="full_font" value="Tahoma, 9pt" />
            <param name="opacity" value="25" />
          </paramlist><![CDATA[Freeze the integrator when 'Frz = 1' or when the output hits either of the limits:]]></Sticky>
        <Wire classid="WireOrthogonal" name="" x="828" y="450" w="10" h="154" orient="0" id="1600549061" layer="">
          <vertex x="0" y="0" />
          <vertex x="0" y="-144" />
        </Wire>
        <User classid="UserCmp" name="master:import" id="1149389585" x="198" y="54" w="69" h="22" z="10" orient="0" defn="master:import" link="-1" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="Name" value="Kp" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:import" id="1463469092" x="198" y="72" w="69" h="22" z="20" orient="0" defn="master:import" link="-1" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="Name" value="Ti" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:import" id="1462593627" x="198" y="126" w="97" h="22" z="40" orient="0" defn="master:import" link="-1" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="Name" value="MaxOut" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:import" id="407428929" x="198" y="144" w="97" h="22" z="50" orient="0" defn="master:import" link="-1" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="Name" value="MinOut" />
          </paramlist>
        </User>
        <Sticky classid="Sticky" x="486" y="306" w="144" h="54" colors="10526880, 15792890" id="2140506206" layer="">
          <paramlist>
            <param name="font" value="1" />
            <param name="align" value="0" />
            <param name="style" value="1" />
            <param name="fg_color" value="16744448" />
            <param name="bg_color" value="16777215" />
            <param name="arrows" value="50" />
            <param name="full_font" value="Tahoma, 9pt" />
            <param name="opacity" value="25" />
          </paramlist><![CDATA[If Rst = 1 then reset.]]></Sticky>
        <User classid="UserCmp" defn="master:mult" id="2124598724" x="450" y="270" w="76" h="53" z="120" orient="6" link="-1" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="DPath" value="1" />
          </paramlist>
        </User>
        <Wire classid="WireOrthogonal" name="" x="486" y="270" w="244" h="10" orient="0" id="302930545" layer="">
          <vertex x="0" y="0" />
          <vertex x="234" y="0" />
        </Wire>
        <User classid="UserCmp" name="master:datalabel" id="527903524" x="324" y="216" w="24" h="21" z="1" orient="0" defn="master:datalabel" link="-1" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="Name" value="Rst" />
          </paramlist>
        </User>
        <Wire classid="WireOrthogonal" name="" x="378" y="216" w="82" h="28" orient="0" id="1291550195" layer="">
          <vertex x="0" y="0" />
          <vertex x="72" y="0" />
          <vertex x="72" y="18" />
        </Wire>
        <User classid="UserCmp" name="master:inv" id="149507424" x="342" y="216" w="40" h="22" z="110" orient="6" defn="master:inv" link="-1" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="INTR" value="0" />
          </paramlist>
        </User>
        <Wire classid="WireOrthogonal" name="" x="324" y="216" w="28" h="10" orient="0" id="14038396" layer="">
          <vertex x="0" y="0" />
          <vertex x="18" y="0" />
        </Wire>
        <User classid="UserCmp" name="master:sumjct" id="877342777" x="864" y="594" w="76" h="58" z="190" orient="4" link="-1" defn="master:sumjct" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="DPath" value="1" />
            <param name="A" value="0" />
            <param name="B" value="-1" />
            <param name="C" value="0" />
            <param name="D" value="1" />
            <param name="E" value="0" />
            <param name="F" value="0" />
            <param name="G" value="0" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:zminusone" id="398445091" x="792" y="594" w="76" h="11" z="210" orient="4" defn="master:zminusone" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="Feedback Loop XYZ" />
            <param name="Type" value="2" />
            <param name="Dim" value="1" />
            <param name="Init" value="0" />
            <param name="InitL" value="0" />
            <param name="InitI" value="0" />
            <param name="InitR" value="0.0" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:sumjct" id="994759548" x="486" y="450" w="76" h="58" z="140" orient="6" link="-1" defn="master:sumjct" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="DPath" value="1" />
            <param name="A" value="0" />
            <param name="B" value="1" />
            <param name="C" value="0" />
            <param name="D" value="1" />
            <param name="E" value="0" />
            <param name="F" value="0" />
            <param name="G" value="0" />
          </paramlist>
        </User>
        <Wire classid="WireOrthogonal" id="2081893908" name="" x="684" y="594" w="208" h="118" orient="0">
          <vertex x="0" y="0" />
          <vertex x="-198" y="0" />
          <vertex x="-198" y="-108" />
        </Wire>
        <Wire classid="WireOrthogonal" id="613431031" name="" x="1044" y="594" w="10" h="334" orient="0">
          <vertex x="0" y="0" />
          <vertex x="0" y="-324" />
        </Wire>
        <Wire classid="WireOrthogonal" id="289072209" name="" x="900" y="594" w="154" h="10" orient="0">
          <vertex x="0" y="0" />
          <vertex x="144" y="0" />
        </Wire>
        <Wire classid="WireOrthogonal" id="372053422" name="" x="864" y="558" w="10" h="298" orient="0">
          <vertex x="0" y="0" />
          <vertex x="0" y="-288" />
        </Wire>
        <User classid="UserCmp" name="master:import" id="1703483790" x="198" y="180" w="76" h="22" z="60" orient="0" defn="master:import" link="-1" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="Name" value="frz" />
          </paramlist>
        </User>
        <User classid="UserCmp" defn="master:select" id="1602802394" x="684" y="450" w="79" h="88" z="150" orient="0" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="A" value="1" />
            <param name="DPath" value="1" />
            <param name="COM" value="Selector" />
            <param name="Dim" value="1" />
          </paramlist>
        </User>
        <Wire classid="WireOrthogonal" id="605491651" name="" x="720" y="450" w="46" h="10" orient="0">
          <vertex x="0" y="0" />
          <vertex x="36" y="0" />
        </Wire>
        <Wire classid="WireOrthogonal" id="216465370" name="" x="684" y="486" w="10" h="46" orient="0">
          <vertex x="0" y="0" />
          <vertex x="0" y="36" />
        </Wire>
        <User classid="UserCmp" name="master:datalabel" id="858577876" x="684" y="522" w="24" h="21" z="1" orient="0" defn="master:datalabel" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="frz" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:const" id="480290760" x="612" y="414" w="69" h="19" z="80" orient="0" defn="master:const" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="" />
            <param name="Value" value="0.0" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:import" id="1796096512" x="198" y="90" w="76" h="22" z="30" orient="0" defn="master:import" link="-1" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="Name" value="Kaw" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:gain" id="1263254159" x="720" y="594" w="76" h="34" z="100" orient="4" link="-1" defn="master:gain" q="4" layer="">
          <paramlist link="-1" name="">
            <param name="G" value="Kaw" />
            <param name="COM" value="Gain" />
            <param name="Dim" value="1" />
          </paramlist>
        </User>
      </schematic>
      <references>
        <using namespace="master" />
      </references>
    </Definition>
    <Definition classid="UserCmpDefn" name="MaxDim" group="" url="" version="" build="" crc="5401649" instances="20" key="" view="false" date="0" id="246205763">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="350" h="400" splitter="65">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Name" name="Name" group="" type="Text" helpmode="Append" allowemptystr="True">
            <value />
            <cond />
            <help />
            <regex />
            <error_msg />
          </parameter>
          <parameter desc="Dimension" name="Dim" group="" unit="" min="2" max="2147483647" content_type="Literal" type="Integer" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[2]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Max/Min?" name="MLogic" group="" type="Choice" helpmode="Append">
            <value><![CDATA[1]]></value>
            <cond />
            <help />
            <choice><![CDATA[1 = Maximum]]></choice>
            <choice><![CDATA[2 = Minimum]]></choice>
          </parameter>
          <parameter desc="Display Maximum / Minimum Index" name="Disp" group="" type="Choice" helpmode="Append">
            <value><![CDATA[0]]></value>
            <cond />
            <help />
            <choice><![CDATA[0 = No]]></choice>
            <choice><![CDATA[1 = Yes]]></choice>
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200" size="2">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Transfer" name="InM:Dim" x="-54" y="0" dim="0" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="MaxMin" x="54" y="0" dim="1" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="MinIdx" x="54" y="36" dim="1" mode="Output" type="Integer" internal="false"><![CDATA[Disp==1]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-31" y="-15" width="67" height="32" stroke="black" stroke-width="0.2" stroke-dasharray="none" fill-style="Hollow" fill-fg="black" fill-bg="black" />
        <line x1="-54" y1="0" x2="-31" y2="0" stroke="Green" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-36" y1="-5" x2="-31" y2="0" stroke="Green" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-36" y1="5" x2="-31" y2="0" stroke="Green" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="54" y1="0" x2="36" y2="0" stroke="Green" stroke-width="0.2" stroke-dasharray="none" port="" />
        <cond><![CDATA[MLogic==1]]></cond>
        <text x="2" y="-1" stroke="black" font-size="Small" text-anchor="Middle"><![CDATA[Max]]></text>
        <cond><![CDATA[true]]></cond>
        <text x="2" y="11" stroke="black" font-size="Small" text-anchor="Middle">x(%Dim)</text>
        <line x1="-45" y1="3" x2="-43" y2="-3" stroke="Green" stroke-dasharray="none" stroke-width="0.2" port="" />
        <cond><![CDATA[MLogic==2]]></cond>
        <text x="0" y="-1" stroke="black" font-size="Small" text-anchor="Middle"><![CDATA[Min]]></text>
        <cond><![CDATA[Disp==1]]></cond>
        <line x1="54" y1="36" x2="10" y2="36" stroke="Blue" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="10" y1="36" x2="10" y2="17" stroke="Blue" stroke-width="0.2" stroke-dasharray="none" port="" />
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[      #LOCAL INTEGER k
      #LOCAL INTEGER Idx1
      $MaxMin = $InM(1)
      Idx1 = 1
      DO k=2,$Dim
        #IF (MLogic==1)
          IF ($InM(k).GE.$MaxMin) THEN
        #ELSE
          IF ($InM(k).LE.$MaxMin) THEN
        #ENDIF
              $MaxMin = $InM(k)
              Idx1 = k
          ENDIF
      ENDDO
      #IF (Disp==1)
        $MinIdx = Idx1
      #ENDIF]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="HalfCell_Sdt" url="" version="" build="" crc="101242459" instances="54" key="" view="false" date="0" group="" id="1265867344">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="380" h="500" splitter="70">
        <category name="Converter Parameters" visible="true">
          <cond />
          <parameter desc="Configuration" name="Config" group="1. General" type="Choice" helpmode="Append">
            <value><![CDATA[2]]></value>
            <cond>
            </cond>
            <help>
            </help>
            <choice><![CDATA[1 = Bypass at top]]></choice>
            <choice><![CDATA[2 = Bypass at btm]]></choice>
          </parameter>
          <parameter desc="No. of Equivalent Sub-Modules " name="Dim" group="1. General" unit="" min="2" max="" content_type="Literal" type="Integer" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[2]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Capacitance per sub-module [uF]" name="C" group="1. General" unit="uF" min="1.0" max="" content_type="Variable" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[2500 [uF]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Sum of capacitor voltages at time zero [kV]" name="SumVc0" group="1. General" unit="kV" min="0.0" max="+1e+308" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[0.0 [kV]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Capacitor Leakage Resistance [Mohm]" name="RP" group="1. General" unit="Mohm" min="" max="" content_type="Variable" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[10 [Mohm]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="IGBT ON Resistance" name="RTON" group="2. IGBT" unit="ohm" min="1.0e-6" max="1.0" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[0.01 [ohm]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Diode ON Resistance" name="RDON" group="3. Diode" unit="ohm" min="1.0e-6" max="1.0" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[0.01 [ohm]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Diode OFF Resistance" name="RDOFF" group="3. Diode" unit="ohm" min="1000" max="100000000" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[10[Mohm]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="IGBT OFF Resistance" name="RTOFF" group="2. IGBT" unit="ohm" min="1000" max="100e6" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[10[Mohm]]]></value>
            <cond />
            <help />
          </parameter>
        </category>
        <category name="Monitoring" visible="true">
          <cond />
          <parameter desc="Total current flowing through component" name="CUR" group="" type="Text" helpmode="Append" allowemptystr="True">
            <value />
            <cond />
            <help />
            <regex />
            <error_msg />
          </parameter>
          <parameter desc="Voltage across terminals of the component" name="Vdiff" group="" type="Text" helpmode="Append" allowemptystr="True">
            <value />
            <cond />
            <help />
            <regex />
            <error_msg />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200" size="2">
        <port model="Natural" name="N" x="0" y="-18" dim="3" mode="Electrical" type="Switched" internal="true"><![CDATA[true]]></port>
        <port model="Transfer" name="VC:Dim" x="54" y="-36" dim="0" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="IC:Dim" x="54" y="0" dim="0" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="FP2:DIM" x="-54" y="0" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[Config==1]]></port>
        <port model="Transfer" name="FP1:DIM" x="-54" y="-36" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[Config==1]]></port>
        <port model="Natural" name="Nbtm" x="0" y="36" dim="1" mode="Electrical" type="NonRemovable" internal="false"><![CDATA[true]]></port>
        <port model="Natural" name="Ntop" x="0" y="-72" dim="1" mode="Electrical" type="NonRemovable" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="FP1:DIM" x="-54" y="0" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[Config==2]]></port>
        <port model="Transfer" name="FP2:DIM" x="-54" y="-36" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[Config==2]]></port>
        <cond><![CDATA[Config==2]]></cond>
        <line x1="30" y1="-56" x2="0" y2="-56" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="0" y1="-56" x2="0" y2="-72" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="30" y1="-56" x2="30" y2="-18" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="0" y1="10" x2="0" y2="36" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <cond><![CDATA[true]]></cond>
        <line x1="-35" y1="-18" x2="-29" y2="-20" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-29" y1="-20" x2="-35" y2="-22" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-35" y1="-22" x2="-29" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-29" y1="-24" x2="-32" y2="-25" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <text x="40" y="-6" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Ic]]></text>
        <text x="42" y="-40" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Vc]]></text>
        <text x="7" y="-14" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[x%DIM]]></text>
        <line x1="-32" y1="-4" x2="-18" y2="-4" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-32" y1="-32" x2="-18" y2="-32" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-29" y1="-12" x2="-32" y2="-10" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-35" y1="-14" x2="-29" y2="-12" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-29" y1="-16" x2="-35" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-35" y1="-18" x2="-29" y2="-16" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-32" y1="-10" x2="-32" y2="-4" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-32" y1="-32" x2="-32" y2="-25" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="23" y1="-18" x2="30" y2="-18" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="0" x2="48" y2="5" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="0" x2="49" y2="-5" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="39" y1="0" x2="54" y2="0" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="-36" x2="49" y2="-31" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="-36" x2="49" y2="-41" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="39" y1="-36" x2="54" y2="-36" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-35" y1="0" x2="-40" y2="5" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-35" y1="0" x2="-40" y2="-5" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-54" y1="0" x2="-35" y2="0" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="23" y1="3" x2="16" y2="0" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="16" y1="-10" x2="16" y2="3" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="19" y1="3" x2="23" y2="3" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="23" y1="3" x2="20" y2="0" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="16" y1="-6" x2="23" y2="-10" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-18" y1="10" x2="23" y2="10" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-18" y1="-43" x2="23" y2="-43" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="23" y1="-39" x2="23" y2="-43" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-25" y1="-16" x2="-11" y2="-16" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-25" y1="-20" x2="-11" y2="-20" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-18" y1="-16" x2="-18" y2="10" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="23" y1="-26" x2="16" y2="-29" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="16" y1="-39" x2="16" y2="-25" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="23" y1="-26" x2="19" y2="-26" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="23" y1="-26" x2="20" y2="-29" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="23" y1="3" x2="23" y2="10" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="16" y1="-35" x2="23" y2="-39" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="23" y1="-10" x2="23" y2="-26" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-35" y1="-36" x2="-40" y2="-31" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-35" y1="-36" x2="-40" y2="-41" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-54" y1="-36" x2="-35" y2="-36" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-18" y1="-43" x2="-18" y2="-21" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <text x="-33" y="-55" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[P blk]]></text>
        <cond><![CDATA[Config==1]]></cond>
        <line x1="0" y1="36" x2="0" y2="20" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="30" y1="20" x2="0" y2="20" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="30" y1="-18" x2="30" y2="20" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="0" y1="-71" x2="0" y2="-44" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
      </svg>
      <script>
        <segment name="Branch"><![CDATA[! Diodes
  BRd1 =  $N(1)  $N(2)   BREAKER  $RTOFF
  BRd2 =  $N(3)  $N(1)   BREAKER  $RTOFF
! Series IGBT
  BRI1 =  $N(2)  $N(1)   BREAKER  $RTOFF
 
! Var RLC branches
BRx1 = $Ntop $N(1) BREAKER 1.0e6
BRx2 = $N(2) $Nbtm BREAKER 1.0e6
! Rvar
BR_Rv1= $N(3) $Nbtm BREAKER]]></segment>
        <segment name="Dsdyn"><![CDATA[#STORAGE REAL:$(DIM1)
#STORAGE INTEGER:$(Dim)
#STORAGE STOR:75 INTEGER:24 REAL:21 LOGICAL:6 RTCL:3 RTCI:3 RTCF:18
#STORAGE RTCF:1


#BEGIN
      #LOCAL REAL Rmin
      Call Retrieve_Rmin(Rmin,$SS)
      RTCF (NRTCF) = Rmin
      NRTCF = NRTCF + 1
      ! Diodes
      CALL PESWITCH1_CFG(0, 0, Rmin, 100e6, 1.0e8, 1.0e8, 0.0, 0.0)
      CALL PESWITCH1_CFG(0, 0, Rmin, 100e6, 1.0e8, 1.0e8, 0.0, 0.0)
      ! IGBT
      CALL PESWITCH1_CFG(3, 0, Rmin, 100e6, 1.0e8, 1.0e8, 0.0, 0.0)
      ! Eq. Eources
      CALL E_VARRLC1_CFG(0 ,$SS , $BRx1, 0)
      CALL E_VARRLC1_CFG(0 ,$SS , $BRx2, 0)
      ! Equivalent resistance setup
      CALL E_VARRLC1_CFG(0 ,$SS , $BR_Rv1, 0)
#ENDBEGIN

#LOCAL REAL Rth1
#LOCAL REAL Rth2
#LOCAL REAL Vth1
#LOCAL REAL Vth2
#LOCAL REAL Ibr1
#LOCAL REAL Ibr2
#LOCAL REAL Rvar1
#LOCAL INTEGER StVth1
#LOCAL INTEGER StVth2
#LOCAL REAL Rmin

      Ibr1 = CBR($BRx1,$SS)
      Ibr2 = CBR($BRx2,$SS)
      Rmin = RTCF(NRTCF)
      NRTCF = NRTCF + 1

      CALL HalfCell_SmallDt(Ibr1,Ibr2,$FP1,$FP2,$C,$Dim,$RP,$RTON,$RTOFF,$RDON,$RDOFF,$SumVc0,Rmin,$VC,$IC,Rth1,Rth2,Vth1,Vth2,Rvar1,StVth1,StVth2)

     
      
      ! Diodes
      CALL PESWITCH1_EXE($SS,$BRd1,1,0.0)
      CALL PESWITCH1_EXE($SS,$BRd2,1,0.0)

      IF (StVth2.EQ.1) THEN
        CALL PESWITCH1_EXE($SS,$BRI1,0,0.0)
      ELSE
        CALL PESWITCH1_EXE($SS,$BRI1,1,0.0)
      ENDIF

      CALL E_VARRLC1_EXE(0 ,$SS , $BRx1, 0, Rth1, -Vth1)
      CALL E_VARRLC1_EXE(0 ,$SS , $BRx2, 0, Rth2, -Vth2)

      CALL E_VARRLC1_EXE(0 ,$SS , $BR_Rv1, 0, Rvar1, 0.0)

      ! remove effect of interpolation/extrapolation locally in this model only.
      EBRD($BRx1,$SS) = EBR($BRx1,$SS)
      EBRD($BRx2,$SS) = EBR($BRx2,$SS)
#! VARRALC storage
#STORAGE REAL:4]]></segment>
        <segment name="Computations"><![CDATA[INTEGER DIM1 = 3*DIM]]></segment>
        <segment name="Dsout"><![CDATA[      #OUTPUT REAL Vdiff {VDC($Ntop,$SS)-VDC($NBtm,$SS)}
      #OUTPUT REAL CUR {CBR($BRx1,$SS)}]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="FullCellR_n_Sdt" group="" url="" version="" build="" crc="35549880" instances="12" key="" view="false" date="0" id="1888329888">
      <paramlist>
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="450" splitter="65">
        <category name="Configuration" visible="true">
          <cond />
          <parameter type="Integer" name="DimC" desc="Number of cells" group="1. General" helpmode="Append" content_type="Literal" intent="Input" min="1" max="" unit="" dim="1">
            <value><![CDATA[2]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Real" name="RDon" desc="Ron resistance" group="3. Diode" helpmode="Append" content_type="Variable" intent="Input" min="" max="" unit="ohm" dim="1">
            <value><![CDATA[0.001]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Real" name="RDoff" desc="Roff resistance" group="3. Diode" helpmode="Append" content_type="Variable" intent="Input" min="" max="" unit="ohm" dim="1">
            <value><![CDATA[1.0e6]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Real" name="C" desc="Cell capacitor" group="1. General" helpmode="Append" content_type="Constant" intent="Input" min="" max="" unit="uF" dim="1">
            <value><![CDATA[2000 [uF]]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Real" name="RIon" desc="Ron resistance" group="2. IGBT" helpmode="Append" content_type="Variable" intent="Input" min="" max="" unit="ohm" dim="1">
            <value><![CDATA[0.001]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Real" name="RIoff" desc="Roff resistance" group="2. IGBT" helpmode="Append" content_type="Variable" intent="Input" min="" max="" unit="ohm" dim="1">
            <value><![CDATA[1.0e6]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Real" name="R5" desc="Capacitor leakage  resistance" group="1. General" helpmode="Append" content_type="Constant" intent="Input" min="" max="" unit="ohm" dim="1">
            <value><![CDATA[1.0e8 [ohm]]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter desc="Sum of capacitor voltages at time zero [kV]" name="SumVc0" group="1. General" unit="kV" min="0.0" max="+1e+308" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[0.0 [kV]]]></value>
            <cond />
            <help />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200" size="2">
        <port model="Natural" name="N" x="0" y="0" dim="9" mode="Electrical" type="NonRemovable" internal="true"><![CDATA[true]]></port>
        <port model="Transfer" name="FP1:DimC" x="-72" y="-36" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="FP2:DimC" x="-72" y="-18" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Vc:DimC" x="54" y="-18" dim="0" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Ic:DimC" x="54" y="0" dim="0" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="FP3:DimC" x="-72" y="0" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="FP4:DimC" x="-72" y="18" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Natural" name="Ntop" x="0" y="-54" dim="1" mode="Electrical" type="NonRemovable" internal="false"><![CDATA[true]]></port>
        <port model="Natural" name="Nbtm" x="0" y="36" dim="1" mode="Electrical" type="NonRemovable" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <line x1="-72" y1="-36" x2="-49" y2="-36" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="-36" x2="-54" y2="-41" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="-36" x2="-54" y2="-31" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-72" y1="-18" x2="-49" y2="-18" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="-18" x2="-54" y2="-23" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="-18" x2="-54" y2="-13" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="31" y1="-18" x2="54" y2="-18" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="-18" x2="49" y2="-23" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="-18" x2="49" y2="-13" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="31" y1="0" x2="53" y2="0" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="0" x2="49" y2="-5" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="0" x2="49" y2="5" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <text x="-2" y="15" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[x%DimC]]></text>
        <line x1="-8" y1="-33" x2="8" y2="-33" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="17" y1="-40" x2="21" y2="-33" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-21" y1="-33" x2="-28" y2="-33" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="8" y1="-33" x2="10" y2="-36" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="8" y1="-33" x2="8" y2="-37" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="21" y1="-40" x2="7" y2="-40" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="8" y1="-33" x2="12" y2="-41" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="21" y1="-33" x2="25" y2="-33" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-12" y1="-40" x2="-8" y2="-33" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-21" y1="-33" x2="-18" y2="-36" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-21" y1="-33" x2="-20" y2="-37" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-8" y1="-40" x2="-21" y2="-40" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-21" y1="-33" x2="-17" y2="-41" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-8" y1="26" x2="8" y2="26" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="17" y1="19" x2="21" y2="26" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-21" y1="26" x2="-28" y2="26" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="8" y1="26" x2="10" y2="23" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="8" y1="26" x2="8" y2="22" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="21" y1="19" x2="7" y2="19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="8" y1="26" x2="12" y2="18" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="21" y1="26" x2="25" y2="26" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-12" y1="19" x2="-8" y2="26" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-21" y1="26" x2="-18" y2="23" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-21" y1="26" x2="-20" y2="22" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-8" y1="19" x2="-21" y2="19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-21" y1="26" x2="-17" y2="18" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="25" y1="-4" x2="5" y2="-4" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-2" y1="-4" x2="-28" y2="-4" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="4" y1="-10" x2="4" y2="3" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-2" y1="-11" x2="-2" y2="3" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="18" y1="-19" x2="14" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="14" y1="-19" x2="12" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="12" y1="-24" x2="7" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="7" y1="-14" x2="3" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="3" y1="-24" x2="-2" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-2" y1="-14" x2="-6" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-6" y1="-24" x2="-11" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-11" y1="-14" x2="-13" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-13" y1="-19" x2="-18" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="18" y1="-19" x2="14" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="14" y1="-19" x2="12" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="12" y1="-24" x2="7" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="7" y1="-14" x2="3" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="3" y1="-24" x2="-2" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-2" y1="-14" x2="-6" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-6" y1="-24" x2="-11" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-11" y1="-14" x2="-13" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-13" y1="-19" x2="-18" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="18" y1="-19" x2="14" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="14" y1="-19" x2="12" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="12" y1="-24" x2="7" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="7" y1="-14" x2="3" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="3" y1="-24" x2="-2" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-2" y1="-14" x2="-6" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-6" y1="-24" x2="-11" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-11" y1="-14" x2="-13" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-13" y1="-19" x2="-18" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="18" y1="-18" x2="18" y2="-4" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-18" y1="-19" x2="-18" y2="-4" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="25" y1="-33" x2="25" y2="25" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-28" y1="-33" x2="-28" y2="25" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="0" y1="-53" x2="0" y2="-34" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="0" y1="26" x2="0" y2="36" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-72" y1="0" x2="-49" y2="0" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="0" x2="-54" y2="-5" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="0" x2="-54" y2="5" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-72" y1="18" x2="-49" y2="18" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="18" x2="-54" y2="13" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="18" x2="-54" y2="23" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <text x="14" y="-42" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[1]]></text>
        <text x="-15" y="-42" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[2]]></text>
        <text x="15" y="34" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[3]]></text>
        <text x="-15" y="34" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[4]]></text>
        <text x="-62" y="-39" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[1]]></text>
        <text x="-62" y="-21" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[2]]></text>
        <text x="-62" y="-3" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[3]]></text>
        <text x="-62" y="15" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[4]]></text>
        <text x="37" y="-21" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Vc]]></text>
        <text x="37" y="-3" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Ic]]></text>
        <text x="-46" y="-57" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[P blk]]></text>
      </svg>
      <script>
        <segment name="Branch"><![CDATA[! Diode1 to 4
BR_d1 = $N(1) $N(2) BREAKER $RDoff
BR_d2 = $N(3) $N(1) BREAKER $RDoff
BR_d3 = $N(5) $N(4) BREAKER $RDoff
BR_d4 = $N(4) $N(6) BREAKER $RDoff
BR_d5 = $N(7) $N(8) BREAKER $RDoff
BR_d6 = $Nbtm $N(8) BREAKER $RDoff
BR_d7 = $N(9) $N(7) BREAKER $RDoff
BR_d8 = $N(9) $Nbtm BREAKER $RDoff

! IGBT1
BR_I1 = $Nbtm $N(7) BREAKER $RIoff


BRx1 = $Ntop $N(1) BREAKER 1.0e6
BRx2 = $N(2) $N(4) BREAKER 1.0e6
BRx3 = $N(5) $N(7) BREAKER 1.0e6
BRx4 = $N(8) $N(9) BREAKER 1.0e6

! Rvar1 to 2
BR_Rv1 = $N(3) $N(4) BREAKER $RIoff
BR_Rv2 = $N(6) $N(7) BREAKER $RIoff]]></segment>
        <segment name="Dsdyn"><![CDATA[#! Storage required for a 'DimC' cells module + 2 storage places for the VARRLC subroutine
#STORAGE REAL:$(DimC2)


#STORAGE STOR:225 INTEGER:72 REAL:63 LOGICAL:18 RTCL:9 RTCI:9 RTCF:54
!
#BEGIN
      #LOCAL REAL Rmin
      Call Retrieve_Rmin(Rmin,$SS)
      RTCF (NRTCF) = Rmin
      NRTCF = NRTCF + 1
      ! Diode1 to 8
      CALL PESWITCH1_CFG(0, 0, Rmin, 10e6, 1.0e8, 1.0e8, 0.0, 0.0)
      CALL PESWITCH1_CFG(0, 0, Rmin, 10e6, 1.0e8, 1.0e8, 0.0, 0.0)
      CALL PESWITCH1_CFG(0, 0, Rmin, 10e6, 1.0e8, 1.0e8, 0.0, 0.0)
      CALL PESWITCH1_CFG(0, 0, Rmin, 10e6, 1.0e8, 1.0e8, 0.0, 0.0)
      CALL PESWITCH1_CFG(0, 0, Rmin, 10e6, 1.0e8, 1.0e8, 0.0, 0.0)
      CALL PESWITCH1_CFG(0, 0, Rmin, 10e6, 1.0e8, 1.0e8, 0.0, 0.0)
      CALL PESWITCH1_CFG(0, 0, Rmin, 10e6, 1.0e8, 1.0e8, 0.0, 0.0)
      CALL PESWITCH1_CFG(0, 0, Rmin, 10e6, 1.0e8, 1.0e8, 0.0, 0.0)

      ! IGBT1
      CALL PESWITCH1_CFG(3, 0, Rmin, 10e6, 1.0e8, 1.0e8, 0.0, 0.0)

      CALL E_VARRLC1_CFG(0 ,$SS , $BRx1, 0)
      CALL E_VARRLC1_CFG(0 ,$SS , $BRx2, 0)
      CALL E_VARRLC1_CFG(0 ,$SS , $BRx3, 0)
      CALL E_VARRLC1_CFG(0 ,$SS , $BRx4, 0)
      CALL E_VARRLC1_CFG(0 ,$SS , $BR_Rv1, 0)
      CALL E_VARRLC1_CFG(0 ,$SS , $BR_Rv2, 0)

#ENDBEGIN
!
!
#LOCAL REAL Ibr1
#LOCAL REAL Ibr2
#LOCAL REAL Ibr3
#LOCAL REAL Ibr4
#LOCAL REAL Rth1
#LOCAL REAL Rth2
#LOCAL REAL Rth3
#LOCAL REAL Rth4
#LOCAL REAL Vth1
#LOCAL REAL Vth2
#LOCAL REAL Vth3
#LOCAL REAL Vth4
#LOCAL REAL Rvar1
#LOCAL REAL Rvar2
#LOCAL INTEGER StVth1
#LOCAL INTEGER StVth2
#LOCAL INTEGER StVth3
#LOCAL INTEGER StVth4
#LOCAL REAL Rmin

      Rmin = RTCF(NRTCF)
      NRTCF = NRTCF + 1
      Ibr1  = CBR($BRx1,$SS)
      Ibr2  = CBR($BRx2,$SS)
      Ibr3  = CBR($BRx3,$SS)
      Ibr4  = CBR($BRx4,$SS)

      CALL MMC_FullB_SmallDT($RDon,$RDoff,$RIon,$RIoff,$DimC,$C,$R5,$FP1,$FP2,$FP3,$FP4,$SumVc0,Rmin,Ibr1,Ibr2,Ibr3,Ibr4,Rth1,Rth2,Rth3,Rth4,Vth1,Vth2,Vth3,Vth4,Rvar1,Rvar2,$Vc,$Ic,StVth1,StVth2,StVth3,StVth4)

      ! Diode1 to 8
      CALL PESWITCH1_EXE($SS,$BR_d1,1,0.0)
      CALL PESWITCH1_EXE($SS,$BR_d2,1,0.0)

      CALL PESWITCH1_EXE($SS,$BR_d3,1,0.0)
      CALL PESWITCH1_EXE($SS,$BR_d4,1,0.0)

      CALL PESWITCH1_EXE($SS,$BR_d5,1,0.0)
      CALL PESWITCH1_EXE($SS,$BR_d6,1,0.0)
      CALL PESWITCH1_EXE($SS,$BR_d7,1,0.0)
      CALL PESWITCH1_EXE($SS,$BR_d8,1,0.0)


      IF (StVth4.EQ.1) THEN
        CALL PESWITCH1_EXE($SS,$BR_I1,0,0.0)
      ELSE
        CALL PESWITCH1_EXE($SS,$BR_I1,1,0.0)
      ENDIF

      CALL E_VARRLC1_EXE(0 ,$SS , $BRx1, 0, Rth1, -Vth1)
      CALL E_VARRLC1_EXE(0 ,$SS , $BRx2, 0, Rth2, -Vth2)
      CALL E_VARRLC1_EXE(0 ,$SS , $BRx3, 0, Rth3, -Vth3)
      CALL E_VARRLC1_EXE(0 ,$SS , $BRx4, 0, Rth4, -Vth4)
      CALL E_VARRLC1_EXE(0 ,$SS , $BR_Rv1, 0, Rvar1, 0.0)
      CALL E_VARRLC1_EXE(0 ,$SS , $BR_Rv2, 0, Rvar2, 0.0)

      EBRD($BRx1,$SS) = -Vth1
      EBRD($BRx2,$SS) = -Vth2
      EBRD($BRx3,$SS) = -Vth3
      EBRD($BRx4,$SS) = -Vth4
#! VARRALC storage
#STORAGE REAL:12]]></segment>
        <segment name="Computations"><![CDATA[INTEGER DimC2 = DimC*5]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="Hyst_MDim" group="" url="" version="" build="" crc="68587828" instances="0" key="" view="false" date="0" id="1525826486">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Name" name="Name" group="" type="Text" helpmode="Append" allowemptystr="True">
            <value />
            <cond />
            <help />
            <regex />
            <error_msg />
          </parameter>
          <parameter desc="Dimension" name="Dim" group="" unit="" min="1" max="2147483647" content_type="Literal" type="Integer" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[2]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Turn off level" name="Loff" group="" unit="" min="-1e+308" max="+1e+308" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[1.0]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Activation Level" name="Lon" group="General" unit="" min="-1e+308" max="+1e+308" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[2.0]]></value>
            <cond />
            <help />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Transfer" name="Vc:Dim" x="-54" y="0" dim="0" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="DRord:Dim" x="54" y="0" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-7" y="-12" width="14" height="14" stroke="black" stroke-width="0.2" stroke-dasharray="none" fill-style="Hollow" fill-fg="black" fill-bg="black" />
        <line x1="-54" y1="0" x2="-25" y2="0" stroke="Green" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-30" y1="-5" x2="-25" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-30" y1="5" x2="-25" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="54" y1="0" x2="25" y2="0" stroke="Blue" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-35" y1="-5" x2="-39" y2="4" stroke="Green" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="7" y1="2" x2="-15" y2="2" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="15" y1="-12" x2="-7" y2="-12" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-7" y1="0" x2="-7" y2="-10" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-7" y1="0" x2="-8" y2="-4" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-7" y1="0" x2="-6" y2="-4" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="7" y1="-10" x2="6" y2="-6" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="7" y1="-10" x2="8" y2="-6" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="7" y1="-10" x2="7" y2="0" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <rect x="-25" y="-17" width="50" height="36" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" fill-style="Hollow" fill-fg="Black" fill-bg="Transparent" />
        <text x="0" y="16" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[x%Dim]]></text>
        <line x1="39" y1="-4" x2="35" y2="5" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[      #STORAGE INTEGER:$(Dim)
      #LOCAL INTEGER Stk
      #LOCAL INTEGER Km

      IF (TIMEZERO) THEN
          DO Km=1,$Dim
              STORI(NSTORI + Km -1) = 0
          ENDDO
      ENDIF

      DO Km=1,$Dim
          Stk = STORI(NSTORI + Km -1)
          IF (Stk.EQ.0) THEN
              IF($Vc(Km).GT.$Lon) Stk = 1
          ELSEIF (Stk.EQ.1) THEN
              IF ($Vc(Km).LT.$Loff) Stk = 0
          ENDIF
          $DRord(Km) = Stk
          STORI(NSTORI + Km -1) = Stk
      ENDDO

      NSTORI = NSTORI + $Dim]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="FullCellR_n" group="" url="" version="" build="" crc="109426490" instances="11" key="" view="false" date="0" id="251578430">
      <paramlist>
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration" visible="true">
          <cond />
          <parameter type="Integer" name="DimC" desc="Number of cells" group="1. General" helpmode="Append" content_type="Literal" intent="Input" min="1" max="" unit="" dim="1">
            <value><![CDATA[2]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Real" name="RDon" desc="RDon" group="2. Diodes" helpmode="Append" content_type="Variable" intent="Input" min="" max="" unit="ohm" dim="1">
            <value><![CDATA[0.001]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Real" name="RDoff" desc="RDoff" group="2. Diodes" helpmode="Append" content_type="Variable" intent="Input" min="" max="" unit="ohm" dim="1">
            <value><![CDATA[1.0e6]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Real" name="C" desc="Cell capacitor" group="1. General" helpmode="Append" content_type="Constant" intent="Input" min="" max="" unit="uF" dim="1">
            <value><![CDATA[2000 [uF]]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Real" name="RIon" desc="RIon" group="2. IGBTs" helpmode="Append" content_type="Variable" intent="Input" min="" max="" unit="ohm" dim="1">
            <value><![CDATA[0.001]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Real" name="RIoff" desc="RIoff" group="2. IGBTs" helpmode="Append" content_type="Variable" intent="Input" min="" max="" unit="ohm" dim="1">
            <value><![CDATA[1.0e6]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Real" name="R5" desc="Capacitor leakage  resistance" group="1. General" helpmode="Append" content_type="Constant" intent="Input" min="" max="" unit="ohm" dim="1">
            <value><![CDATA[1.0e8 [ohm]]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter desc="Sum of capacitor voltages at time zero [kV]" name="SumVc0" group="1. General" unit="kV" min="0.0" max="+1e+308" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[0.0 [kV]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Use bypass switches?" name="BPS_L" group="4. Bypass switches" type="Choice" helpmode="Append">
            <value><![CDATA[0]]></value>
            <cond>
            </cond>
            <help>
            </help>
            <choice><![CDATA[0 = No]]></choice>
            <choice><![CDATA[1 = Yes]]></choice>
          </parameter>
          <parameter desc="Bypass ON resistance" name="BRon" group="4. Bypass switches" unit="ohm" min="0.0001" max="+1e+308" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[0.001  [ohm]]]></value>
            <cond>
            </cond>
            <help>
            </help>
          </parameter>
          <parameter desc="Bypass OFF resistance" name="BRoff" group="4. Bypass switches" unit="ohm" min="0.0001" max="+1e+308" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[1.0e7  [ohm]]]></value>
            <cond>
            </cond>
            <help>
            </help>
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200" size="2">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Natural" name="a" x="-18" y="0" dim="1" mode="Electrical" type="NonRemovable" internal="true"><![CDATA[true]]></port>
        <port model="Transfer" name="FP1:DimC" x="-72" y="-36" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Natural" name="b" x="18" y="0" dim="1" mode="Electrical" type="NonRemovable" internal="true"><![CDATA[true]]></port>
        <port model="Transfer" name="FP2:DimC" x="-72" y="-18" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Vc:DimC" x="54" y="-18" dim="0" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Ic:DimC" x="54" y="0" dim="0" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="FP3:DimC" x="-72" y="0" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="FP4:DimC" x="-72" y="18" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Natural" name="Ntop" x="0" y="-54" dim="1" mode="Electrical" type="NonRemovable" internal="false"><![CDATA[true]]></port>
        <port model="Natural" name="Nbtm" x="0" y="36" dim="1" mode="Electrical" type="NonRemovable" internal="false"><![CDATA[true]]></port>
        <port model="Natural" name="b" x="18" y="18" dim="1" mode="Electrical" type="NonRemovable" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="BRord:DimC" x="-72" y="36" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[BPS_L==1]]></port>
        <cond><![CDATA[true]]></cond>
        <line x1="-72" y1="-36" x2="-49" y2="-36" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="-36" x2="-54" y2="-41" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="-36" x2="-54" y2="-31" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-72" y1="-18" x2="-49" y2="-18" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="-18" x2="-54" y2="-23" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="-18" x2="-54" y2="-13" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="31" y1="-18" x2="54" y2="-18" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="-18" x2="49" y2="-23" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="-18" x2="49" y2="-13" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="31" y1="0" x2="53" y2="0" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="0" x2="49" y2="-5" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="0" x2="49" y2="5" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <text x="0" y="14" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[x%DimC]]></text>
        <line x1="-8" y1="-33" x2="8" y2="-33" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="17" y1="-40" x2="21" y2="-33" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-21" y1="-33" x2="-28" y2="-33" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="8" y1="-33" x2="10" y2="-36" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="8" y1="-33" x2="8" y2="-37" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="21" y1="-40" x2="7" y2="-40" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="8" y1="-33" x2="12" y2="-41" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="21" y1="-33" x2="25" y2="-33" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-12" y1="-40" x2="-8" y2="-33" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-21" y1="-33" x2="-18" y2="-36" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-21" y1="-33" x2="-20" y2="-37" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-8" y1="-40" x2="-21" y2="-40" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-21" y1="-33" x2="-17" y2="-41" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-8" y1="26" x2="8" y2="26" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="17" y1="19" x2="21" y2="26" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-21" y1="26" x2="-28" y2="26" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="8" y1="26" x2="10" y2="23" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="8" y1="26" x2="8" y2="22" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="21" y1="19" x2="7" y2="19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="8" y1="26" x2="12" y2="18" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="21" y1="26" x2="25" y2="26" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-12" y1="19" x2="-8" y2="26" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-21" y1="26" x2="-18" y2="23" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-21" y1="26" x2="-20" y2="22" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-8" y1="19" x2="-21" y2="19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-21" y1="26" x2="-17" y2="18" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="25" y1="-4" x2="5" y2="-4" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-2" y1="-4" x2="-28" y2="-4" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="4" y1="-10" x2="4" y2="3" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-2" y1="-11" x2="-2" y2="3" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="18" y1="-19" x2="14" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="14" y1="-19" x2="12" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="12" y1="-24" x2="7" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="7" y1="-14" x2="3" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="3" y1="-24" x2="-2" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-2" y1="-14" x2="-6" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-6" y1="-24" x2="-11" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-11" y1="-14" x2="-13" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-13" y1="-19" x2="-18" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="18" y1="-19" x2="14" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="14" y1="-19" x2="12" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="12" y1="-24" x2="7" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="7" y1="-14" x2="3" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="3" y1="-24" x2="-2" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-2" y1="-14" x2="-6" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-6" y1="-24" x2="-11" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-11" y1="-14" x2="-13" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-13" y1="-19" x2="-18" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="18" y1="-19" x2="14" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="14" y1="-19" x2="12" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="12" y1="-24" x2="7" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="7" y1="-14" x2="3" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="3" y1="-24" x2="-2" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-2" y1="-14" x2="-6" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-6" y1="-24" x2="-11" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-11" y1="-14" x2="-13" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-13" y1="-19" x2="-18" y2="-19" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="18" y1="-18" x2="18" y2="-4" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-18" y1="-19" x2="-18" y2="-4" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="25" y1="-33" x2="25" y2="25" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-28" y1="-33" x2="-28" y2="25" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="0" y1="-53" x2="0" y2="-34" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="0" y1="26" x2="0" y2="36" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-72" y1="0" x2="-49" y2="0" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="0" x2="-54" y2="-5" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="0" x2="-54" y2="5" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-72" y1="18" x2="-49" y2="18" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="18" x2="-54" y2="13" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="18" x2="-54" y2="23" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <text x="14" y="-42" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[1]]></text>
        <text x="-15" y="-42" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[2]]></text>
        <text x="15" y="34" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[3]]></text>
        <text x="-15" y="34" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[4]]></text>
        <text x="-62" y="-39" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[1]]></text>
        <text x="-62" y="-21" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[2]]></text>
        <text x="-62" y="-3" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[3]]></text>
        <text x="-62" y="15" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[4]]></text>
        <text x="37" y="-21" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Vc]]></text>
        <text x="37" y="-3" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Ic]]></text>
        <cond><![CDATA[BPS_L==1]]></cond>
        <text x="-57" y="32" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[BPS]]></text>
        <line x1="-49" y1="36" x2="-54" y2="41" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-49" y1="36" x2="-54" y2="31" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-72" y1="36" x2="-49" y2="36" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
      </svg>
      <script>
        <segment name="Branch"><![CDATA[! Diode1
BR_d1 = $Ntop $a BREAKER $RTOFF
! Diode4
BR_d4 = $b $Nbtm BREAKER $RTOFF

! IGBT1
BR_I1 = $a $Ntop BREAKER $RTOFF
! IGBT2
BR_I2 = $b $Ntop BREAKER $RTOFF
! IGBT3
BR_I3 = $Nbtm $a BREAKER $RTOFF
! IGBT4
BR_I4 = $Nbtm $b BREAKER $RTOFF

BRx = $a $b BREAKER $RTOFF]]></segment>
        <segment name="Dsdyn"><![CDATA[! Storage required for a 'DimC' cells module + 2 storage places for the VARRLC subroutine
#STORAGE REAL:$(DimC2)
#IF (BPS_L==1)
  #STORAGE REAL:$(DimC)
#ENDIF

#STORAGE STOR:150 INTEGER:48 REAL:42 LOGICAL:12 RTCL:6 RTCI:6 RTCF:36
!
#BEGIN
      #LOCAL REAL Rmin
      Call Retrieve_Rmin(Rmin,$SS)
      CALL E_VARRLC1_CFG(0 ,$SS , $BRx, 0)
      ! Diode1
      CALL PESWITCH1_CFG(0, 0, Rmin, 10e6, 1.0e6, 1.0e6, 0.0, 0.0)
      ! Diode4
      CALL PESWITCH1_CFG(0, 0, Rmin, 10e6, 1.0e6, 1.0e6, 0.0, 0.0)

      ! IGBT1
      CALL PESWITCH1_CFG(3, 0, Rmin, 10e6, 1.0e6, 1.0e6, 0.0, 0.0)
      ! IGBT2
      CALL PESWITCH1_CFG(3, 0, Rmin, 10e6, 1.0e6, 1.0e6, 0.0, 0.0)
      ! IGBT3
      CALL PESWITCH1_CFG(3, 0, Rmin, 10e6, 1.0e6, 1.0e6, 0.0, 0.0)
      ! IGBT4
      CALL PESWITCH1_CFG(3, 0, Rmin, 10e6, 1.0e6, 1.0e6, 0.0, 0.0)
#ENDBEGIN
!
!
#LOCAL REAL Ibr
#LOCAL REAL Vbr
#LOCAL REAL Rth
#LOCAL REAL Vth
#LOCAL INTEGER BlkFlag

      Ibr  = CBR($BRx,$SS)
      Vbr  = VDC($a,$SS)-VDC($b,$SS)

      ! Diode1
      CALL PESWITCH1_EXE($SS,$BR_d1,1,0.0)
      ! Diode4
      CALL PESWITCH1_EXE($SS,$BR_d4,1,0.0)

      CALL Block_Finder_H($DimC,$FP1,$FP2,$FP3,$FP4,BlkFlag)

      IF (BlkFlag.EQ.1) THEN
        ! If blocked !!
        CALL PESWITCH1_EXE($SS,$BR_I1,0,0.0)
        CALL PESWITCH1_EXE($SS,$BR_I2,1,0.0)
        CALL PESWITCH1_EXE($SS,$BR_I3,1,0.0)
        CALL PESWITCH1_EXE($SS,$BR_I4,0,0.0)
      ELSEIF (BlkFlag.EQ.0) THEN
        CALL PESWITCH1_EXE($SS,$BR_I1,1,0.0)
        CALL PESWITCH1_EXE($SS,$BR_I2,0,0.0)
        CALL PESWITCH1_EXE($SS,$BR_I3,0,0.0)
        CALL PESWITCH1_EXE($SS,$BR_I4,1,0.0)
      ENDIF

      ! BYPASS SWITCH
      #IF (BPS_L==0)
      CALL MMC_FullB($RIon,$RIoff,$RDon,$RDoff,$DimC,$C,$R5,$FP1,$FP2,$FP3,$FP4,BlkFlag,$SumVc0,Ibr,Vbr,Rth,Vth,$Vc,$Ic)
      #ELSE
      CALL MMC_FullB_BPS($RIon,$RIoff,$RDon,$RDoff,$DimC,$C,$R5,$FP1,$FP2,$FP3,$FP4,BlkFlag,$SumVc0,$BRord,$BRon,$BRoff,Ibr,Vbr,Rth,Vth,$Vc,$Ic)
      #ENDIF
!
      CALL E_VARRLC1_EXE(0 ,$SS , $BRx, 0, Rth, -Vth)
      EBRD($BRx,$SS) = -Vth
#STORAGE REAL:20]]></segment>
        <segment name="Computations"><![CDATA[INTEGER DimC2 = DimC*5]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="InvClarke" group="" url="" version="" build="" crc="132339464" instances="0" key="" view="false" date="0" id="1682026832">
      <paramlist>
        <param name="Description" value="Inverse Clarke (Alpha-Beta to abc) transformation" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60" />
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Transfer" name="IsA" x="54" y="-18" dim="1" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="IsD1" x="-54" y="-18" dim="1" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="IsB" x="54" y="0" dim="1" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="IsC" x="54" y="18" dim="1" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="IsQ1" x="-54" y="18" dim="1" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <line x1="-36" y1="18" x2="-53" y2="18" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsQ1" />
        <rect x="-36" y="-29" width="78" height="58" stroke="Maroon" stroke-dasharray="none" stroke-width="0.6" fill-style="Hollow" fill-fg="Black" fill-bg="Transparent" port="" />
        <line x1="42" y1="-18" x2="54" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsA" />
        <line x1="42" y1="0" x2="54" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsB" />
        <line x1="42" y1="18" x2="53" y2="18" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsC" />
        <line x1="-37" y1="-18" x2="-53" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsD1" />
        <text x="36" y="-15" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[a]]></text>
        <text x="36" y="2" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[b]]></text>
        <text x="35" y="19" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[c]]></text>
        <text x="4" y="3" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Inverse]]></text>
        <text x="3" y="16" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Clarke]]></text>
        <text x="-28" y="-16" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[A]]></text>
        <text x="-29" y="21" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[B]]></text>
        <line x1="-36" y1="-18" x2="-42" y2="-11" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="" />
        <line x1="-36" y1="-18" x2="-42" y2="-24" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="" />
        <line x1="-37" y1="18" x2="-43" y2="24" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="" />
        <line x1="-37" y1="18" x2="-43" y2="12" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="" />
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[       $IsA=($IsD1)
       $IsB=(-$IsD1/2.0 + 1.732050808*$IsQ1/2.0)
       $IsC=(-$IsD1/2.0 - 1.732050808*$IsQ1/2.0)]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="abc2AB" group="" url="" version="" build="" crc="19653319" instances="1" key="" view="false" date="0" id="1374678901">
      <paramlist>
        <param name="Description" value="ABC to alpha-beta" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="General" visible="true">
          <cond />
          <parameter desc="Delta / Wye Clark" name="Type" group="" type="Choice" helpmode="Append">
            <value><![CDATA[2]]></value>
            <cond>
            </cond>
            <help>
            </help>
            <choice><![CDATA[1 = Delta]]></choice>
            <choice><![CDATA[2 = Wye]]></choice>
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200" size="2">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Transfer" name="IsA" x="-54" y="-18" dim="1" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="IsB" x="-54" y="0" dim="1" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="IsC" x="-54" y="18" dim="1" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="I_A" x="54" y="-18" dim="1" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="I_B" x="54" y="18" dim="1" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <line x1="54" y1="-18" x2="36" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsA" />
        <line x1="54" y1="18" x2="36" y2="18" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsC" />
        <rect x="-29" y="-29" width="65" height="59" stroke="Teal" stroke-dasharray="none" stroke-width="0.6" fill-style="Solid" fill-fg="White" fill-bg="Transparent" port="" />
        <line x1="-54" y1="-18" x2="-29" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsA" />
        <line x1="-29" y1="-18" x2="-35" y2="-11" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsA" />
        <line x1="-29" y1="-18" x2="-35" y2="-24" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsA" />
        <line x1="-54" y1="0" x2="-29" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsB" />
        <line x1="-29" y1="0" x2="-35" y2="6" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsB" />
        <line x1="-29" y1="0" x2="-35" y2="-6" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsB" />
        <line x1="-54" y1="18" x2="-29" y2="18" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsC" />
        <line x1="-29" y1="18" x2="-35" y2="24" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsC" />
        <line x1="-29" y1="18" x2="-35" y2="11" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="IsC" />
        <text x="-22" y="-14" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[a]]></text>
        <text x="-21" y="4" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[b]]></text>
        <text x="-21" y="22" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[c]]></text>
        <text x="7" y="4" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Clarke]]></text>
        <text x="29" y="-16" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[A]]></text>
        <text x="28" y="21" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[B]]></text>
      </svg>
      <script>
        <segment name="Dsdyn"><![CDATA[!  ABC to alpha, beta Transform
!
      #IF Type==1
      $I_A = TWO_3RD*($IsA - $IsB*0.5 - $IsC*0.5)
      $I_B = ($IsB - $IsC)*SQRT_1BY3
      #ELSE
      $I_A = ($IsA - $IsC)*SQRT_1BY3
      $I_B = TWO_3RD*(-$IsA*0.5 + $IsB - $IsC*0.5)
      #ENDIF]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="MDim_Select" group="" url="" version="" build="" crc="103855532" instances="0" key="" view="false" date="0" id="797651388">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Dimension" name="dim" group="" unit="" min="1" max="2147483647" content_type="Literal" type="Integer" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[10]]></value>
            <cond>
            </cond>
            <help>
            </help>
          </parameter>
          <parameter desc="Criteria for selectin A" name="Sel" group="" unit="" min="-2147483648" max="2147483647" content_type="Literal" type="Integer" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[1]]></value>
            <cond>
            </cond>
            <help>
            </help>
          </parameter>
          <parameter desc="Number type" name="Ntype" group="" type="Choice" helpmode="Append">
            <value><![CDATA[1]]></value>
            <cond>
            </cond>
            <help>
            </help>
            <choice><![CDATA[1 = Real]]></choice>
            <choice><![CDATA[2 = Integer]]></choice>
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200" size="2">
        <port model="Transfer" name="Ctrl" x="0" y="36" dim="1" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="InA:dim" x="-36" y="-36" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[Ntype==2]]></port>
        <port model="Transfer" name="InB:dim" x="-36" y="0" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[Ntype==2]]></port>
        <port model="Transfer" name="Out:dim" x="36" y="0" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[Ntype==2]]></port>
        <port model="Transfer" name="Out:dim" x="36" y="0" dim="0" mode="Output" type="Real" internal="false"><![CDATA[Ntype==1]]></port>
        <port model="Transfer" name="InB:dim" x="-36" y="0" dim="0" mode="Input" type="Real" internal="false"><![CDATA[Ntype==1]]></port>
        <port model="Transfer" name="InA:dim" x="-36" y="-36" dim="0" mode="Input" type="Real" internal="false"><![CDATA[Ntype==1]]></port>
        <cond><![CDATA[true]]></cond>
        <line x1="-36" y1="-36" x2="-22" y2="-36" stroke="Navy" stroke-dasharray="none" stroke-width="0.4" />
        <line x1="-22" y1="-36" x2="-22" y2="-29" stroke="Navy" stroke-dasharray="none" stroke-width="0.4" />
        <text x="-30" y="-36" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[A]]></text>
        <line x1="-36" y1="0" x2="-22" y2="0" stroke="Navy" stroke-dasharray="none" stroke-width="0.4" />
        <line x1="-22" y1="0" x2="-22" y2="-6" stroke="Navy" stroke-dasharray="none" stroke-width="0.4" />
        <text x="-30" y="0" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[B]]></text>
        <ellipse cx="0" cy="-17" rx="3" ry="3" stroke="Navy" stroke-dasharray="none" stroke-width="0.4" fill-style="Solid" fill-fg="Black" fill-bg="Transparent" />
        <line x1="-27" y1="-28" x2="0" y2="-18" stroke="Navy" stroke-dasharray="none" stroke-width="0.4" />
        <line x1="0" y1="-18" x2="18" y2="-18" stroke="Navy" stroke-dasharray="none" stroke-width="0.4" />
        <line x1="18" y1="-18" x2="18" y2="0" stroke="Navy" stroke-dasharray="none" stroke-width="0.4" />
        <line x1="18" y1="0" x2="36" y2="0" stroke="Navy" stroke-dasharray="none" stroke-width="0.4" />
        <line x1="0" y1="36" x2="0" y2="0" stroke="Navy" stroke-dasharray="none" stroke-width="0.4" />
        <line x1="-5" y1="5" x2="0" y2="0" stroke="Navy" stroke-dasharray="none" stroke-width="0.4" />
        <line x1="0" y1="0" x2="5" y2="5" stroke="Navy" stroke-dasharray="none" stroke-width="0.4" />
        <text x="-15" y="19" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Ctrl]]></text>
        <text x="0" y="-30" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Ctrl]]></text>
        <text x="18" y="-30" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[=]]></text>
        <text x="36" y="-30" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[%Sel]]></text>
        <text x="27" y="18" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[(x%dim)]]></text>
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[      #LOCAL INTEGER KixIV
      DO KixIV=1,$dim
        IF ($Ctrl.EQ.$Sel) THEN
          $Out(KixIV) = $InA(KixIV)
        ELSE
          $Out(KixIV) = $InB(KixIV)
        ENDIF
      ENDDO]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="PIwithFreeze" group="" url="" version="" build="" crc="104647114" instances="100" key="" view="false" date="1483468351" id="105095775">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Name" name="Name" group="" type="Text" helpmode="Append">
            <value />
            <cond />
            <help />
            <regex />
            <error_msg />
          </parameter>
          <parameter desc="Proportional gain Kp" name="Kp" group="PI parameters" unit="" min="0" max="+1e+308" content_type="Variable" type="Real" helpmode="Append" intent="Input">
            <value><![CDATA[1]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Integrator time constant" name="Ti" group="PI parameters" unit="s" min="1e-20" max="+1e+308" content_type="Variable" type="Real" helpmode="Append" intent="Input">
            <value><![CDATA[0.01 [s]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Maximum output limit" name="MaxOut" group="Limits" unit="" min="-1e308" max="+1e+308" content_type="Variable" type="Real" helpmode="Append" intent="Input">
            <value><![CDATA[100]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Minimum output limit" name="MinOut" group="Limits" unit="" min="-1e+308" max="+1e+308" content_type="Variable" type="Real" helpmode="Append" intent="Input">
            <value><![CDATA[-100]]></value>
            <cond />
            <help />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
          <param name="monitor_bus_voltage" value="0" />
        </paramlist>
        <port model="Transfer" name="In" x="-36" y="0" dim="1" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Out" x="36" y="0" dim="1" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="frz" x="0" y="36" dim="1" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Rst" x="0" y="-36" dim="1" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-23" y="-19" width="42" height="42" stroke="Gray" stroke-width="0.2" stroke-dasharray="none" fill-style="Solid" fill-fg="Gray" fill-bg="Black" />
        <rect x="-21" y="-21" width="42" height="42" stroke="Red" stroke-width="0.6" stroke-dasharray="none" fill-style="Solid" fill-fg="Yellow" fill-bg="Black" />
        <text x="0" y="1" stroke="black" font-size="small" text-anchor="Middle">PI</text>
        <line x1="-36" y1="0" x2="-21" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-26" y1="-5" x2="-21" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-26" y1="5" x2="-21" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-31" y="-6" stroke="black" font-size="small" text-anchor="Middle">In</text>
        <line x1="36" y1="0" x2="21" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="32" y="-5" stroke="black" font-size="small" text-anchor="Middle">Out</text>
        <line x1="0" y1="36" x2="0" y2="21" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-5" y1="26" x2="0" y2="21" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="5" y1="26" x2="0" y2="21" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-14" y="33" stroke="black" font-size="Small" text-anchor="Middle">Frz</text>
        <line x1="0" y1="-36" x2="0" y2="-21" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="5" y1="-26" x2="0" y2="-21" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-5" y1="-26" x2="0" y2="-21" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-15" y="-27" stroke="black" font-size="small" text-anchor="Middle">Rst</text>
      </svg>
      <schematic classid="UserCanvas" zoomlevel="6" scrollx="0" scrolly="151">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
          <param name="monitor_bus_voltage" value="0" />
          <param name="show_signal" value="0" />
          <param name="show_virtual" value="0" />
          <param name="show_sequence" value="0" />
          <param name="auto_sequence" value="1" />
        </paramlist>
        <User classid="UserCmp" name="master:import" id="1272703650" x="288" y="270" w="69" h="22" z="50" orient="0" defn="master:import" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="In" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:import" id="1986397630" x="306" y="468" w="76" h="22" z="70" orient="0" defn="master:import" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="frz" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:import" id="1129061692" x="522" y="486" w="76" h="22" z="80" orient="0" defn="master:import" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="Rst" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:export" id="1520854336" x="828" y="270" w="74" h="21" z="190" orient="4" defn="master:export" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="Out" />
          </paramlist>
        </User>
        <User classid="UserCmp" defn="master:hardlimit" id="1751728642" x="702" y="270" w="76" h="58" z="180" orient="0" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="UL" value="MaxOut" />
            <param name="LL" value="MinOut" />
            <param name="COM" value="Hard_Limit" />
            <param name="Dim" value="1" />
            <param name="Limit" value="0" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:sumjct" id="1603115476" x="630" y="270" w="76" h="58" z="170" orient="6" link="-1" defn="master:sumjct" q="4">
          <paramlist link="-1" name="">
            <param name="DPath" value="1" />
            <param name="A" value="0" />
            <param name="B" value="1" />
            <param name="C" value="0" />
            <param name="D" value="1" />
            <param name="E" value="0" />
            <param name="F" value="0" />
            <param name="G" value="0" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:gain" id="1727672491" x="558" y="270" w="76" h="34" z="110" orient="0" link="-1" defn="master:gain" q="4">
          <paramlist link="-1" name="">
            <param name="G" value="Kp" />
            <param name="COM" value="Gain" />
            <param name="Dim" value="1" />
          </paramlist>
        </User>
        <User classid="UserCmp" defn="master:integral" id="1274886541" x="558" y="414" w="76" h="70" z="160" orient="0" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Extrn" value="0" />
            <param name="Reset" value="1" />
            <param name="Mthd" value="0" />
            <param name="noname5" value="" />
            <param name="INTR" value="0" />
            <param name="INTCLR" value="0" />
            <param name="T" value="Ti" />
            <param name="Yo" value="0.0" />
            <param name="YRst" value="0.0" />
            <param name="YHi" value="MaxOut" />
            <param name="YLo" value="MinOut" />
          </paramlist>
        </User>
        <User classid="UserCmp" defn="master:select" id="1174236128" x="468" y="414" w="79" h="88" z="150" orient="0" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="A" value="1" />
            <param name="DPath" value="1" />
            <param name="COM" value="Selector" />
            <param name="Dim" value="1" />
          </paramlist>
        </User>
        <Wire classid="WireOrthogonal" name="" x="738" y="270" w="64" h="10" orient="0" id="1927475991">
          <vertex x="0" y="0" />
          <vertex x="54" y="0" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="468" y="486" w="10" h="46" orient="0" id="1483691423">
          <vertex x="0" y="0" />
          <vertex x="0" y="-36" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="558" y="486" w="10" h="46" orient="0" id="845127279">
          <vertex x="0" y="0" />
          <vertex x="0" y="-36" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="504" y="414" w="28" h="10" orient="0" id="1378626360">
          <vertex x="0" y="0" />
          <vertex x="18" y="0" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="324" y="270" w="100" h="10" orient="0" id="1337911435">
          <vertex x="0" y="0" />
          <vertex x="90" y="0" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="432" y="414" w="100" h="154" orient="0" id="1371844100">
          <vertex x="0" y="0" />
          <vertex x="-90" y="0" />
          <vertex x="-90" y="-144" />
        </Wire>
        <Sticky classid="Sticky" x="18" y="396" w="198" h="54" colors="10526880, 15792890" id="1014375195" layer="">
          <paramlist>
            <param name="font" value="1" />
            <param name="align" value="0" />
            <param name="style" value="1" />
            <param name="fg_color" value="4210816" />
            <param name="bg_color" value="16777215" />
            <param name="arrows" value="0" />
            <param name="full_font" value="Tahoma, 9pt" />
            <param name="opacity" value="25" />
          </paramlist><![CDATA[Freeze the integrator when 'Frz = 1' or when the output hits either of the limits:]]></Sticky>
        <User classid="UserCmp" name="master:const" id="1777579995" x="396" y="378" w="69" h="19" z="60" orient="0" defn="master:const" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="" />
            <param name="Value" value="0" />
          </paramlist>
        </User>
        <Wire classid="WireOrthogonal" name="" x="594" y="414" w="46" h="118" orient="0" id="483900664">
          <vertex x="0" y="0" />
          <vertex x="36" y="0" />
          <vertex x="36" y="-108" />
        </Wire>
        <User classid="UserCmp" name="master:import" id="956188522" x="198" y="54" w="69" h="22" z="10" orient="0" defn="master:import" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="Kp" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:import" id="71511641" x="198" y="72" w="69" h="22" z="20" orient="0" defn="master:import" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="Ti" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:import" id="415420505" x="198" y="126" w="97" h="22" z="30" orient="0" defn="master:import" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="MaxOut" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:import" id="1829460380" x="198" y="144" w="97" h="22" z="40" orient="0" defn="master:import" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="MinOut" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:logic_mult" id="377346931" x="432" y="486" w="76" h="62" z="140" orient="0" defn="master:logic_mult" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Type" value="1" />
            <param name="Num_in" value="3" />
            <param name="Inv" value="0" />
            <param name="disnum" value="1" />
            <param name="INTR" value="0" />
            <param name="Inv1" value="0" />
            <param name="Inv2" value="0" />
            <param name="Inv3" value="0" />
            <param name="Inv4" value="0" />
            <param name="Inv5" value="0" />
            <param name="Inv6" value="0" />
            <param name="Inv7" value="0" />
            <param name="Inv8" value="0" />
            <param name="Inv9" value="0" />
          </paramlist>
        </User>
        <Wire classid="WireOrthogonal" name="" x="198" y="540" w="64" h="10" orient="0" id="1414915397">
          <vertex x="0" y="0" />
          <vertex x="54" y="0" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="324" y="504" w="82" h="28" orient="0" id="2115442426">
          <vertex x="0" y="0" />
          <vertex x="0" y="-18" />
          <vertex x="72" y="-18" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="342" y="468" w="64" h="10" orient="0" id="230540376">
          <vertex x="0" y="0" />
          <vertex x="54" y="0" />
        </Wire>
        <User classid="UserCmp" name="master:datalabel" id="1848394753" x="198" y="540" w="46" h="21" z="1" orient="0" defn="master:datalabel" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="MaxOut" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:datalabel" id="1970481960" x="198" y="576" w="46" h="21" z="1" orient="0" defn="master:datalabel" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="MinOut" />
          </paramlist>
        </User>
        <Wire classid="WireOrthogonal" name="" x="126" y="612" w="136" h="10" orient="0" id="1281919707">
          <vertex x="0" y="0" />
          <vertex x="126" y="0" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="198" y="576" w="64" h="10" orient="0" id="830253332">
          <vertex x="0" y="0" />
          <vertex x="54" y="0" />
        </Wire>
        <Sticky classid="Sticky" x="486" y="306" w="144" h="54" colors="10526880, 15792890" id="1674223904" layer="">
          <paramlist>
            <param name="font" value="1" />
            <param name="align" value="0" />
            <param name="style" value="1" />
            <param name="fg_color" value="16744448" />
            <param name="bg_color" value="16777215" />
            <param name="arrows" value="50" />
            <param name="full_font" value="Tahoma, 9pt" />
            <param name="opacity" value="25" />
          </paramlist><![CDATA[If Rst = 1 then reset.]]></Sticky>
        <User classid="UserCmp" defn="master:mult" id="1025868155" x="450" y="270" w="76" h="53" z="100" orient="6" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="DPath" value="1" />
          </paramlist>
        </User>
        <Wire classid="WireOrthogonal" name="" x="486" y="270" w="46" h="10" orient="0" id="1557571281">
          <vertex x="0" y="0" />
          <vertex x="36" y="0" />
        </Wire>
        <User classid="UserCmp" name="master:datalabel" id="1613828683" x="324" y="216" w="24" h="21" z="1" orient="0" defn="master:datalabel" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="Rst" />
          </paramlist>
        </User>
        <Wire classid="WireOrthogonal" name="" x="378" y="216" w="82" h="28" orient="0" id="1326606260">
          <vertex x="0" y="0" />
          <vertex x="72" y="0" />
          <vertex x="72" y="18" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="666" y="270" w="550" h="388" orient="0" id="2055325497">
          <vertex x="0" y="0" />
          <vertex x="0" y="378" />
          <vertex x="-540" y="378" />
          <vertex x="-540" y="234" />
          <vertex x="-414" y="234" />
        </Wire>
        <User classid="UserCmp" name="master:inv" id="1307591734" x="342" y="216" w="40" h="22" z="90" orient="6" defn="master:inv" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="INTR" value="0" />
          </paramlist>
        </User>
        <Wire classid="WireOrthogonal" name="" x="324" y="216" w="28" h="10" orient="0" id="554632798">
          <vertex x="0" y="0" />
          <vertex x="18" y="0" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="396" y="504" w="82" h="82" orient="0" id="1879503443">
          <vertex x="0" y="0" />
          <vertex x="-36" y="0" />
          <vertex x="-36" y="72" />
          <vertex x="-72" y="72" />
        </Wire>
        <User classid="UserCmp" defn="master:compar" id="1592966300" x="252" y="504" w="80" h="62" z="120" orient="0" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Pulse" value="0" />
            <param name="INTR" value="0" />
            <param name="OPos" value="1" />
            <param name="ONone" value="0" />
            <param name="ONeg" value="1" />
            <param name="OHi" value="1" />
            <param name="OLo" value="0" />
            <param name="conv" value="1" />
          </paramlist>
        </User>
        <User classid="UserCmp" defn="master:compar" id="1350903155" x="252" y="576" w="80" h="62" z="130" orient="0" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Pulse" value="0" />
            <param name="INTR" value="0" />
            <param name="OPos" value="1" />
            <param name="ONone" value="0" />
            <param name="ONeg" value="1" />
            <param name="OHi" value="1" />
            <param name="OLo" value="0" />
            <param name="conv" value="1" />
          </paramlist>
        </User>
      </schematic>
      <references>
        <using namespace="master" />
      </references>
    </Definition>
    <Definition classid="UserCmpDefn" name="ConstantMDimRE" group="" url="" version="" build="" crc="12276984" instances="0" key="" view="false" date="0" id="1759175771">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Dimension" name="Dimx" group="" unit="" min="2" max="2147483647" content_type="Literal" type="Integer" helpmode="Append" intent="Input">
            <value><![CDATA[38]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Real value" name="ValueRe" group="" unit="" min="-1e+308" max="+1e+308" content_type="Variable" type="Real" helpmode="Append" intent="Input">
            <value><![CDATA[0.0]]></value>
            <cond />
            <help />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Transfer" name="Out:Dimx" x="36" y="0" dim="0" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-22" y="-6" width="44" height="12" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" fill-style="DgCross" fill-fg="Aqua" fill-bg="Transparent" />
        <text x="1" y="4" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[%ValueRe]]></text>
        <line x1="30" y1="0" x2="36" y2="0" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="22" y1="-7" x2="30" y2="0" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-22" y1="-7" x2="22" y2="-7" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <path d="M-22.000 -7.000 A8 7 0 1 0 -22.000 7.000" arc="-30,-7,-14,7,90,180" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="22" y1="7" x2="-22" y2="7" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="30" y1="0" x2="22" y2="7" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <text x="-1" y="17" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[x(%Dimx)]]></text>
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[      #LOCAL INTEGER Ki
      DO Ki=1,$Dimx
        $Out(Ki) = $ValueRe
      ENDDO]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="ANDM" group="" url="" version="" build="" crc="43733013" instances="48" key="" view="false" date="0" id="386843197">
      <paramlist>
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration">
          <parameter type="Choice" name="Type1" desc="Boolean Function" group="" helpmode="Append">
            <value><![CDATA[1]]></value>
            <choice><![CDATA[1 = AND]]></choice>
            <regex />
            <error_msg />
            <cond><![CDATA[false]]></cond>
            <help><![CDATA[]]></help>
          </parameter>
          <parameter type="Integer" name="DIM" desc="Dimension of InputA" group="" helpmode="Append" content_type="Variable" intent="Input" min="1" max="" unit="">
            <value><![CDATA[1]]></value>
            <help><![CDATA[]]></help>
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Transfer" name="IN1" x="-72" y="18" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="IN2:DIM" x="-72" y="-18" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="OUTT:DIM" x="36" y="0" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[Type1==1]]></cond>
        <line x1="-72" y1="18" x2="-39" y2="18" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="18" x2="-44" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="18" x2="-44" y2="23" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-72" y1="-18" x2="-39" y2="-18" stroke="Gray" stroke-dasharray="none" stroke-width="0.6" port="" />
        <line x1="-39" y1="-18" x2="-44" y2="-23" stroke="Black" stroke-dasharray="none" stroke-width="0.6" port="" />
        <line x1="-39" y1="-18" x2="-44" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="0.6" port="" />
        <line x1="36" y1="0" x2="0" y2="0" stroke="Gray" stroke-dasharray="none" stroke-width="0.6" port="" />
        <line x1="-39" y1="-24" x2="-39" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="11" x2="-39" y2="22" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-14" x2="-39" y2="12" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <path d="M-13.000 -13.000 A14 13 0 1 1 -13.000 13.000" arc="-27,-13,1,13,90,-180" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-13" x2="-12" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="13" x2="-12" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <cond><![CDATA[Type1==5]]></cond>
        <line x1="-54" y1="-18" x2="-39" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-18" x2="-44" y2="-23" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-18" x2="-44" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-54" y1="18" x2="-39" y2="18" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="18" x2="-44" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="18" x2="-44" y2="23" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="18" y1="0" x2="0" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-25" x2="-39" y2="-14" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-23" y1="-14" x2="-39" y2="-14" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-23" y1="14" x2="-39" y2="14" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="14" x2="-39" y2="24" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <path d="M-39.000 -14.000 A5 14 0 1 1 -39.000 14.000" arc="-44,-14,-34,14,90,-180" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <path d="M-23.000 14.000 A27 27 0 0 0 0.383 0.500" arc="-50,-40,4,14,-90,60" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <path d="M-23.000 -14.000 A27 27 0 0 1 0.383 -0.500" arc="-50,-14,4,40,450,-60" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <cond><![CDATA[Type1==4]]></cond>
        <line x1="-54" y1="-18" x2="-39" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-18" x2="-44" y2="-23" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-18" x2="-44" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-54" y1="18" x2="-39" y2="18" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="18" x2="-44" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="18" x2="-44" y2="23" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="18" y1="0" x2="6" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-25" x2="-39" y2="-14" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-23" y1="-14" x2="-39" y2="-14" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-23" y1="14" x2="-39" y2="14" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="14" x2="-39" y2="24" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <path d="M-39.000 -14.000 A5 14 0 1 1 -39.000 14.000" arc="-44,-14,-34,14,90,-180" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <path d="M-23.000 -14.000 A27 27 0 0 1 0.383 -0.500" arc="-50,-14,4,40,450,-60" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <path d="M-23.000 14.000 A27 27 0 0 0 0.383 0.500" arc="-50,-40,4,14,-90,60" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <ellipse cx="3" cy="0" rx="3" ry="3" stroke="Black" stroke-dasharray="none" stroke-width="0.4" fill-style="Hollow" fill-fg="Black" fill-bg="" port="" />
        <cond><![CDATA[Type1==3]]></cond>
        <line x1="-54" y1="-18" x2="-39" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-18" x2="-44" y2="-23" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-18" x2="-44" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-54" y1="18" x2="-39" y2="18" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="18" x2="-44" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="18" x2="-44" y2="23" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="18" y1="0" x2="7" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="12" x2="-39" y2="23" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-25" x2="-39" y2="-14" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-14" x2="-39" y2="12" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <path d="M-13.000 -13.000 A14 13 0 1 1 -13.000 13.000" arc="-27,-13,1,13,90,-180" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-13" x2="-12" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="13" x2="-12" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <ellipse cx="4" cy="0" rx="3" ry="3" stroke="Black" stroke-dasharray="none" stroke-width="0.4" fill-style="Hollow" fill-fg="Black" fill-bg="" port="" />
        <cond><![CDATA[Type1==5]]></cond>
        <path d="M-42.000 -14.000 A5 14 0 1 1 -42.000 14.000" arc="-47,-14,-37,14,90,-180" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <cond><![CDATA[Type1==2]]></cond>
        <line x1="-54" y1="-18" x2="-39" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-18" x2="-44" y2="-23" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-18" x2="-44" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-54" y1="18" x2="-39" y2="18" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="18" x2="-44" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="18" x2="-44" y2="23" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="18" y1="0" x2="0" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="-25" x2="-39" y2="-14" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-23" y1="-14" x2="-39" y2="-14" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-23" y1="14" x2="-39" y2="14" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-39" y1="14" x2="-39" y2="24" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <path d="M-39.000 -14.000 A5 14 0 1 1 -39.000 14.000" arc="-44,-14,-34,14,90,-180" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <path d="M-23.000 -14.000 A27 27 0 0 1 0.383 -0.500" arc="-50,-14,4,40,450,-60" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <path d="M-23.000 14.000 A27 27 0 0 0 0.383 0.500" arc="-50,-40,4,14,-90,60" stroke="Black" stroke-dasharray="none" stroke-width="0.4" port="" />
        <cond><![CDATA[true]]></cond>
        <text x="-49" y="-23" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[In(%DIM)]]></text>
        <line x1="-62" y1="-13" x2="-56" y2="-23" stroke="Gray" stroke-dasharray="none" stroke-width="0.6" port="" />
        <line x1="6" y1="5" x2="12" y2="-5" stroke="Gray" stroke-dasharray="none" stroke-width="0.6" port="" />
        <text x="19" y="-11" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Out(%DIM)]]></text>
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[! AND GATE
#IF $DIM==1
      IF(($IN1*$IN2).NE.0) THEN
        $OUTT = 1
      ELSE
        $OUTT = 0
      ENDIF
#ELSEIF $DIM>1
#LOCAL INTEGER idx
      DO idx = 1, $DIM
        IF(($IN1*$IN2(idx)).NE.0) THEN
          $OUTT(idx) = 1
        ELSE
          $OUTT(idx) = 0
        ENDIF
      ENDDO
#ENDIF]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="OrMdim" group="" url="" version="" build="" crc="22768052" instances="0" key="" view="false" date="0" id="1713701426">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Name" name="Name" group="" type="Text" helpmode="Append">
            <value />
            <cond />
            <help />
            <regex />
            <error_msg />
          </parameter>
          <parameter desc="Dimension" name="Dim" group="" unit="" min="1" max="2147483647" content_type="Literal" type="Integer" helpmode="Append" intent="Input">
            <value><![CDATA[1]]></value>
            <cond />
            <help />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
          <param name="monitor_bus_voltage" value="0" />
        </paramlist>
        <port model="Transfer" name="IN1:Dim" x="-36" y="-18" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="OutN:Dim" x="36" y="0" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="IN2:Dim" x="-36" y="18" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-15" y="-12" width="18" height="24" stroke="Aqua" stroke-dasharray="none" stroke-width="0.2" port="" fill-style="Solid" fill-fg="Aqua" fill-bg="Transparent" />
        <text x="-5" y="4" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[x(%Dim)]]></text>
        <line x1="26" y1="0" x2="36" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-24" y1="-18" x2="-18" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-24" y1="18" x2="-18" y2="18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-36" y1="18" x2="-24" y2="18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-36" y1="-18" x2="-24" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-2" y1="13" x2="-18" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-4" y1="-13" x2="-18" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-18" y1="-24" x2="-18" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-18" y1="13" x2="-18" y2="24" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="20" y1="0" x2="26" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="26" y1="0" x2="36" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <path d="M-18.270 -14.620 A30 30 0 0 1 -18.270 12.620" arc="-75,-31,-15,29,27,-54" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <path d="M-2.000 13.000 A26 26 0 0 0 20.517 0.000" arc="-28,-40,24,13,-90,60" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <path d="M-3.000 -13.000 A27 26 0 0 1 20.383 -0.000" arc="-31,-13,24,40,90,-60" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[      #LOCAL INTEGER Kc
      DO Kc=1,$Dim
        IF (($IN1(Kc).EQ.0).AND.($IN2(Kc).EQ.0)) THEN
          $OutN(Kc)=0
        ELSE
          $OutN(Kc)=1
        ENDIF
      ENDDO]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="NegationMdim" group="" url="" version="" build="" crc="57113532" instances="48" key="" view="false" date="0" id="1524030895">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Name" name="Name" group="" type="Text" helpmode="Append">
            <value />
            <cond />
            <help />
            <regex />
            <error_msg />
          </parameter>
          <parameter desc="Dimension" name="Dim" group="" unit="" min="1" max="2147483647" content_type="Literal" type="Integer" helpmode="Append" intent="Input">
            <value><![CDATA[1]]></value>
            <cond />
            <help />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Transfer" name="OUT:Dim" x="18" y="0" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="IN:Dim" x="-18" y="0" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <line x1="-9" y1="-6" x2="3" y2="0" stroke="Aqua" stroke-dasharray="none" stroke-width="1.2" port="" />
        <line x1="3" y1="0" x2="-9" y2="6" stroke="Aqua" stroke-dasharray="none" stroke-width="1.2" port="" />
        <rect x="-11" y="-6" width="5" height="3" stroke="Aqua" stroke-dasharray="none" stroke-width="0.2" port="" fill-style="Solid" fill-fg="Aqua" fill-bg="Transparent" />
        <rect x="-11" y="2" width="6" height="4" stroke="Aqua" stroke-dasharray="none" stroke-width="0.2" port="" fill-style="Solid" fill-fg="Aqua" fill-bg="Transparent" />
        <rect x="-11" y="-3" width="11" height="6" stroke="Aqua" stroke-dasharray="none" stroke-width="0.2" port="" fill-style="Solid" fill-fg="Aqua" fill-bg="Transparent" />
        <ellipse cx="9" cy="0" rx="3" ry="3" stroke="Black" stroke-dasharray="none" stroke-width="0.2" fill-style="Solid" fill-fg="Aqua" fill-bg="Transparent" />
        <line x1="12" y1="0" x2="18" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-11" y1="-9" x2="-11" y2="9" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="6" y1="0" x2="-11" y2="-9" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-18" y1="0" x2="-11" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <text x="-4" y="25" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[x(%Dim)]]></text>
        <line x1="-11" y1="9" x2="6" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[      #LOCAL INTEGER Kn
      DO Kn=1,$Dim
        IF ($In(Kn).EQ.0) THEN
          $OUT(Kn) = 1
        ELSE 
          $OUT(Kn) = 0
        ENDIF
      ENDDO]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="ConstantMDimInt" group="" url="" version="" build="" crc="91284716" instances="0" key="" view="false" date="0" id="704368784">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Dimension" name="Dimx" group="" unit="" min="2" max="2147483647" content_type="Literal" type="Integer" helpmode="Append" intent="Input">
            <value><![CDATA[38]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Value" name="Value" group="" unit="" min="-2147483648" max="2147483647" content_type="Variable" type="Integer" helpmode="Append" intent="Input">
            <value><![CDATA[0]]></value>
            <cond />
            <help />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
          <param name="monitor_bus_voltage" value="0" />
        </paramlist>
        <port model="Transfer" name="Out:Dimx" x="36" y="0" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-22" y="-6" width="44" height="12" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" fill-style="Solid" fill-fg="Aqua" fill-bg="Transparent" />
        <text x="1" y="4" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[%Value]]></text>
        <line x1="30" y1="0" x2="36" y2="0" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="22" y1="-7" x2="30" y2="0" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-22" y1="-7" x2="22" y2="-7" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <path d="M-22.000 -7.000 A8 7 0 1 0 -22.000 7.000" arc="-30,-7,-14,7,90,180" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="22" y1="7" x2="-22" y2="7" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="30" y1="0" x2="22" y2="7" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <text x="-1" y="17" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[x(%Dimx)]]></text>
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[      #LOCAL INTEGER Ki
      DO Ki=1,$Dimx
        $Out(Ki) = $Value
      ENDDO]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="AndMdim" group="" url="" version="" build="" crc="36104213" instances="48" key="" view="false" date="0" id="1243852106">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Name" name="Name" group="" type="Text" helpmode="Append">
            <value />
            <cond />
            <help />
            <regex />
            <error_msg />
          </parameter>
          <parameter desc="Dimension" name="Dim" group="" unit="" min="1" max="2147483647" content_type="Literal" type="Integer" helpmode="Append" intent="Input">
            <value><![CDATA[1]]></value>
            <cond />
            <help />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
          <param name="monitor_bus_voltage" value="0" />
        </paramlist>
        <port model="Transfer" name="IN2:Dim" x="-36" y="18" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="IN1:Dim" x="-36" y="-18" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="OUT:Dim" x="36" y="0" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <line x1="26" y1="0" x2="36" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-24" y1="-18" x2="-18" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-24" y1="18" x2="-18" y2="18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-36" y1="18" x2="-24" y2="18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-36" y1="-18" x2="-24" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="7" y1="-13" x2="-18" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <path d="M7.000 -13.000 A12 13 0 1 1 7.000 13.000" arc="-5,-13,20,13,90,-180" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-18" y1="-13" x2="-18" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-18" y1="-24" x2="-18" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-18" y1="13" x2="-18" y2="24" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="20" y1="0" x2="26" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="26" y1="0" x2="36" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-18" y1="13" x2="7" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <rect x="-17" y="-12" width="24" height="24" stroke="Aqua" stroke-dasharray="none" stroke-width="0.2" port="" fill-style="Solid" fill-fg="Aqua" fill-bg="Transparent" />
        <text x="-1" y="3" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[x(%Dim)]]></text>
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[      #LOCAL INTEGER Kc
      DO Kc=1,$Dim
        IF (($IN1(Kc).EQ.1).AND.($IN2(Kc).EQ.1)) THEN
          $OUT(Kc)=1
        ELSE
          $OUT(Kc)=0
        ENDIF
      ENDDO]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="FiringHBridge" group="" url="" version="" build="" crc="133785517" instances="10" key="" view="false" date="0" id="521192501">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="400" h="400" splitter="70">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="# of cells per arm" name="DimFb" group="" unit="" min="2" max="10000" content_type="Literal" type="Integer" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[10]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Change cells fired when Ncells changes?" name="FrChange" group="" type="Choice" helpmode="Append">
            <value><![CDATA[1]]></value>
            <cond>
            </cond>
            <help>
            </help>
            <choice><![CDATA[1 = Yes]]></choice>
            <choice><![CDATA[0 = No]]></choice>
          </parameter>
          <parameter desc="Firing clock signal (1 for every time step)" name="FrClk" group="" unit="" min="0" max="1" content_type="Variable" type="Integer" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[1]]></value>
            <cond><![CDATA[FrChange==0]]></cond>
            <help>
            </help>
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200" size="2">
        <port model="Transfer" name="Ncells" x="-90" y="-18" dim="1" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="T1:DimFb" x="108" y="-18" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Iac" x="-18" y="-54" dim="1" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="T2:DimFb" x="108" y="0" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Idx:DimFb" x="-90" y="36" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Block" x="18" y="72" dim="1" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="T3:DimFb" x="108" y="18" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="T4:DimFb" x="108" y="36" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-39" y="-39" width="116" height="93" stroke="Blue" stroke-width="0.2" stroke-dasharray="none" fill-style="Hollow" fill-fg="Black" fill-bg="Black" />
        <text x="-7" y="-5" stroke="black" font-size="Small" text-anchor="Middle">Firing</text>
        <text x="-7" y="8" stroke="black" font-size="Small" text-anchor="Middle">Block</text>
        <line x1="-90" y1="-18" x2="-29" y2="-18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-44" y1="-23" x2="-39" y2="-18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-44" y1="-13" x2="-39" y2="-18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-58" y="-24" stroke="black" font-size="Small" text-anchor="Middle">#Cells</text>
        <text x="-4" y="-45" stroke="black" font-size="Small" text-anchor="Middle">Iac</text>
        <line x1="-23" y1="-44" x2="-18" y2="-39" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-13" y1="-44" x2="-18" y2="-39" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-18" y1="-54" x2="-18" y2="-23" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-7" y="26" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(%DimFb)]]></text>
        <line x1="33" y1="-18" x2="33" y2="36" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="107" y1="36" x2="33" y2="36" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="49" y="47" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[T4]]></text>
        <text x="50" y="-23" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[T1]]></text>
        <rect x="-29" y="-23" width="44" height="66" stroke="Blue" stroke-dasharray="none" stroke-width="0.8" port="" fill-style="Hollow" fill-fg="Black" fill-bg="Transparent" />
        <text x="-58" y="30" stroke="black" font-size="Small" text-anchor="Middle">Index</text>
        <line x1="-44" y1="41" x2="-39" y2="36" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-44" y1="31" x2="-39" y2="36" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-90" y1="36" x2="-29" y2="36" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-64" y="47" stroke="black" font-size="Small" text-anchor="Middle">(-) to (+)</text>
        <line x1="13" y1="59" x2="18" y2="54" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="23" y1="59" x2="18" y2="54" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="40" y="67" stroke="black" font-size="Small" text-anchor="Middle">Block</text>
        <line x1="18" y1="54" x2="18" y2="72" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="108" y1="-18" x2="33" y2="-18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="108" y1="0" x2="33" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="108" y1="18" x2="33" y2="18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="33" y1="9" x2="15" y2="9" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
      </svg>
      <script>
        <segment name="Dsdyn"><![CDATA[      #STORAGE INTEGER:$(DimK1)

      
      CALL HBridge_Ctrl($Ncells,$Idx,$DimFb,$Iac,$Block,$T1,$T2,$T3,$T4,
      #IF FrChange==1
     + -1)
      #ELSE
     + $FrClk)
      #ENDIF]]></segment>
        <segment name="Computations"><![CDATA[INTEGER DimK1 = 5*DimFb+2]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="arraymerge" url="" view="false" instances="119" date="0" crc="18314189" group="Miscellaneous" id="2123387010">
      <paramlist>
        <param name="Description" value="Merges two data array signals together" />
      </paramlist>
      <form name="Data Merge" w="280" h="420" splitter="70">
        <category name="Configuration" visible="true">
          <cond />
          <parameter type="Choice" name="Type" desc="Output Data Type" group=" General" helpmode="Append">
            <value><![CDATA[2]]></value>
            <choice><![CDATA[0 = Logical]]></choice>
            <choice><![CDATA[1 = Integer]]></choice>
            <choice><![CDATA[2 = Real]]></choice>
            <cond />
            <help />
          </parameter>
          <parameter type="Choice" name="Disp" desc="Display Index Numbers?" group=" General" helpmode="Append">
            <value><![CDATA[0]]></value>
            <choice><![CDATA[0 = No]]></choice>
            <choice><![CDATA[1 = Yes]]></choice>
            <cond />
            <help />
          </parameter>
          <parameter type="Integer" name="Index1" desc="Start at Index Number" content_type="Literal" min="1" max="999" unit="" group="Array Signal 1" helpmode="Append" intent="Input">
            <value><![CDATA[1]]></value>
            <cond />
            <help />
          </parameter>
          <parameter type="Integer" name="Dim1" desc="Dimension (enter 1 for scalar)" content_type="Literal" min="1" max="999" unit="" group="Array Signal 1" helpmode="Append" intent="Input">
            <value><![CDATA[2]]></value>
            <cond />
            <help />
          </parameter>
          <parameter type="Integer" name="Index2" desc="Start at Index Number" content_type="Literal" min="1" max="999" unit="" group="Array Signal 2" helpmode="Append" intent="Input">
            <value><![CDATA[1]]></value>
            <cond />
            <help />
          </parameter>
          <parameter type="Integer" name="Dim2" desc="Dimension (enter 1 for scalar)" content_type="Literal" min="1" max="999" unit="" group="Array Signal 2" helpmode="Append" intent="Input">
            <value><![CDATA[2]]></value>
            <cond />
            <help />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Transfer" name="AL1" x="-36" y="18" dim="0" mode="Input" type="Logical" internal="false"><![CDATA[(Type==0)]]></port>
        <port model="Transfer" name="AL2" x="-18" y="-18" dim="0" mode="Input" type="Logical" internal="false"><![CDATA[(Type==0)]]></port>
        <port model="Transfer" name="AI1" x="-36" y="18" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[(Type==1)]]></port>
        <port model="Transfer" name="AI2" x="-18" y="-18" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[(Type==1)]]></port>
        <port model="Transfer" name="AR1" x="-36" y="18" dim="0" mode="Input" type="Real" internal="false"><![CDATA[(Type==2)]]></port>
        <port model="Transfer" name="AR2" x="-18" y="-18" dim="0" mode="Input" type="Real" internal="false"><![CDATA[(Type==2)]]></port>
        <port model="Transfer" name="BL:Dim3" x="18" y="0" dim="0" mode="Output" type="Logical" internal="false"><![CDATA[(Type==0)]]></port>
        <port model="Transfer" name="BI:Dim3" x="18" y="0" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[(Type==1)]]></port>
        <port model="Transfer" name="BR:Dim3" x="18" y="0" dim="0" mode="Output" type="Real" internal="false"><![CDATA[(Type==2)]]></port>
        <cond><![CDATA[type==2]]></cond>
        <line x1="-18" y1="0" x2="-36" y2="18" stroke="Green" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="0" y1="0" x2="-18" y2="-18" stroke="Green" stroke-dasharray="none" stroke-width="0.2" />
        <cond><![CDATA[(Type==0)]]></cond>
        <line x1="18" y1="0" x2="-18" y2="0" stroke="Fuchsia" stroke-dasharray="none" stroke-width="0.2" />
        <cond><![CDATA[(Type==1)]]></cond>
        <line x1="18" y1="0" x2="-18" y2="0" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <cond><![CDATA[(Type==2)]]></cond>
        <line x1="18" y1="0" x2="-18" y2="0" stroke="Green" stroke-dasharray="none" stroke-width="0.2" />
        <cond><![CDATA[(type==2)]]></cond>
        <line x1="-4" y1="0" x2="-12" y2="-1" stroke="Green" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-4" y1="0" x2="-12" y2="1" stroke="Green" stroke-dasharray="none" stroke-width="0.2" />
        <cond><![CDATA[(Type==1)]]></cond>
        <line x1="-19" y1="0" x2="-37" y2="18" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-1" y1="0" x2="-19" y2="-18" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="17" y1="0" x2="-19" y2="0" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <cond><![CDATA[(type==1)]]></cond>
        <line x1="-5" y1="0" x2="-13" y2="-1" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-5" y1="0" x2="-13" y2="1" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" />
        <cond><![CDATA[(Type==0)]]></cond>
        <line x1="-18" y1="0" x2="-36" y2="18" stroke="Fuchsia" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="0" y1="0" x2="-18" y2="-18" stroke="Fuchsia" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="18" y1="0" x2="-18" y2="0" stroke="Fuchsia" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-4" y1="0" x2="-12" y2="-1" stroke="Fuchsia" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-4" y1="0" x2="-12" y2="1" stroke="Fuchsia" stroke-dasharray="none" stroke-width="0.2" />
        <cond><![CDATA[(Disp==1)&&(Dim1!=1)]]></cond>
        <text x="-21" y="16" stroke="Black" fill="Black" font-size="Small" text-anchor="Start"><![CDATA[1 ($Index1 to $End1)]]></text>
        <cond><![CDATA[(Disp==1)&&(Dim2!=1)]]></cond>
        <text x="-4" y="-7" stroke="Black" fill="Black" font-size="Small" text-anchor="Start"><![CDATA[2 ($Index2 to $End2)]]></text>
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[#LOCAL INTEGER IVD1_1
#LOCAL INTEGER IVD1_2
      DO IVD1_1 = 1,$Dim1
#IF Type==0
         $BL(IVD1_1) = $AL1($Index1 - 1 + IVD1_1)
#ELSEIF Type==1
         $BI(IVD1_1) = $AI1($Index1 - 1 + IVD1_1)
#ELSE
         $BR(IVD1_1) = $AR1($Index1 - 1 + IVD1_1)
#ENDIF
      ENDDO
      DO IVD1_2 = 1,$Dim2
#IF Type==0
         $BL(IVD1_2 + $Dim1) = $AL2($Index2 - 1 + IVD1_2)
#ELSEIF Type==1
         $BI(IVD1_2 + $Dim1) = $AI2($Index2 - 1 + IVD1_2)
#ELSE
         $BR(IVD1_2 + $Dim1) = $AR2($Index2 - 1 + IVD1_2)
#ENDIF
      ENDDO]]></segment>
        <segment name="FlyBy"><![CDATA[Merge two data signal arrays.
:AL1

:AL1

:AI1

:AI2

:AR1

:AR2

:BL

:BI

:BR]]></segment>
        <segment name="Computations"><![CDATA[INTEGER Dim3=Dim1+Dim2
INTEGER End1 = Index1 + Dim1 - 1
INTEGER End2 = Index2 + Dim2 - 1]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="CapEq5New" url="" version="" build="" crc="18028793" instances="54" key="" view="false" date="0" group="" id="1501013137">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="380" h="500" splitter="70">
        <category name="Converter Parameters" visible="true">
          <cond />
          <parameter desc="Configuration" name="Config" group="1. General" type="Choice" helpmode="Append">
            <value><![CDATA[1]]></value>
            <cond />
            <help />
            <choice><![CDATA[1 = Bypass at top]]></choice>
            <choice><![CDATA[2 = Bypass at btm]]></choice>
          </parameter>
          <parameter desc="No. of Equivalent Sub-Modules " name="Dim" group="1. General" unit="" min="2" max="" content_type="Literal" type="Integer" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[2]]></value>
            <cond>
            </cond>
            <help>
            </help>
          </parameter>
          <parameter desc="Capacitance per sub-module [uF]" name="C" group="1. General" unit="uF" min="1.0" max="" content_type="Variable" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[2500 [uF]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Sum of capacitor voltages at time zero [kV]" name="SumVc0" group="1. General" unit="kV" min="0.0" max="+1e+308" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[0.0 [kV]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Capacitor Leakage Resistance [Mohm]" name="RP" group="1. General" unit="Mohm" min="" max="" content_type="Variable" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[10 [Mohm]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="IGBT ON Resistance" name="RTON" group="2. IGBT" unit="ohm" min="1.0e-6" max="1.0" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[0.01 [ohm]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Diode ON Resistance" name="RDON" group="3. Diode" unit="ohm" min="1.0e-6" max="1.0" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[0.01 [ohm]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Diode OFF Resistance" name="RDOFF" group="3. Diode" unit="ohm" min="1000" max="100000000" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[10[Mohm]]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="IGBT OFF Resistance" name="RTOFF" group="2. IGBT" unit="ohm" min="1000" max="100e6" content_type="Constant" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[10[Mohm]]]></value>
            <cond />
            <help />
          </parameter>
        </category>
        <category name="Monitoring" visible="true">
          <cond />
          <parameter desc="Total current flowing through component" name="CUR" group="" type="Text" helpmode="Append" allowemptystr="True">
            <value />
            <cond />
            <help />
            <regex />
            <error_msg />
          </parameter>
          <parameter desc="Voltage across terminals of the component" name="Vdiff" group="" type="Text" helpmode="Append" allowemptystr="True">
            <value />
            <cond />
            <help />
            <regex />
            <error_msg />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200" size="2">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Natural" name="NA" x="0" y="0" dim="1" mode="Electrical" type="NonRemovable" internal="true"><![CDATA[true]]></port>
        <port model="Transfer" name="VC:Dim" x="54" y="-36" dim="0" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="IC:Dim" x="54" y="0" dim="0" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="FP2:DIM" x="-54" y="-36" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[Config==2]]></port>
        <port model="Transfer" name="FP1:DIM" x="-54" y="0" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[Config==2]]></port>
        <port model="Transfer" name="FP2:Dim" x="-54" y="0" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[Config==1]]></port>
        <port model="Transfer" name="FP1:Dim" x="-54" y="-36" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[Config==1]]></port>
        <port model="Natural" name="NB" x="0" y="36" dim="1" mode="Electrical" type="NonRemovable" internal="false"><![CDATA[true]]></port>
        <port model="Natural" name="Ntop" x="0" y="-72" dim="1" mode="Electrical" type="NonRemovable" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[Config==2]]></cond>
        <line x1="30" y1="-56" x2="0" y2="-56" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="0" y1="-56" x2="0" y2="-72" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="30" y1="-56" x2="30" y2="-18" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="0" y1="10" x2="0" y2="36" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <cond><![CDATA[true]]></cond>
        <line x1="-35" y1="-18" x2="-29" y2="-20" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-29" y1="-20" x2="-35" y2="-22" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-35" y1="-22" x2="-29" y2="-24" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-29" y1="-24" x2="-32" y2="-25" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <cond><![CDATA[Config==1]]></cond>
        <line x1="30" y1="20" x2="0" y2="20" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="0" y1="20" x2="0" y2="36" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="0" y1="-72" x2="0" y2="-43" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="30" y1="-18" x2="30" y2="20" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <cond><![CDATA[true]]></cond>
        <text x="40" y="-6" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Ic]]></text>
        <text x="42" y="-40" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Vc]]></text>
        <text x="7" y="-14" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[x%DIM]]></text>
        <line x1="-32" y1="-4" x2="-18" y2="-4" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-32" y1="-32" x2="-18" y2="-32" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-29" y1="-12" x2="-32" y2="-10" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-35" y1="-14" x2="-29" y2="-12" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-29" y1="-16" x2="-35" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-35" y1="-18" x2="-29" y2="-16" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-32" y1="-10" x2="-32" y2="-4" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-32" y1="-32" x2="-32" y2="-25" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="23" y1="-18" x2="30" y2="-18" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="0" x2="48" y2="5" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="0" x2="49" y2="-5" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="39" y1="0" x2="54" y2="0" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="-36" x2="49" y2="-31" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="54" y1="-36" x2="49" y2="-41" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="39" y1="-36" x2="54" y2="-36" stroke="Green" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-35" y1="0" x2="-40" y2="5" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-35" y1="0" x2="-40" y2="-5" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-54" y1="0" x2="-35" y2="0" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="23" y1="3" x2="16" y2="0" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="16" y1="-10" x2="16" y2="3" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="19" y1="3" x2="23" y2="3" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="23" y1="3" x2="20" y2="0" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="16" y1="-6" x2="23" y2="-10" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-18" y1="10" x2="23" y2="10" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-18" y1="-43" x2="23" y2="-43" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="23" y1="-39" x2="23" y2="-43" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-25" y1="-16" x2="-11" y2="-16" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-25" y1="-20" x2="-11" y2="-20" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-18" y1="-16" x2="-18" y2="10" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="23" y1="-26" x2="16" y2="-29" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="16" y1="-39" x2="16" y2="-25" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="23" y1="-26" x2="19" y2="-26" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="23" y1="-26" x2="20" y2="-29" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="23" y1="3" x2="23" y2="10" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="16" y1="-35" x2="23" y2="-39" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="23" y1="-10" x2="23" y2="-26" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-35" y1="-36" x2="-40" y2="-31" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-35" y1="-36" x2="-40" y2="-41" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-54" y1="-36" x2="-35" y2="-36" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
        <line x1="-18" y1="-43" x2="-18" y2="-21" stroke="Blue" stroke-dasharray="none" stroke-width="0.4" port="" />
      </svg>
      <script>
        <segment name="Branch"><![CDATA[! Series Diode
  BrDs =  $Ntop  $NA   BREAKER  $RTOFF
! Series IGBT
  BrTs =  $Na  $Ntop   BREAKER  $RTOFF
! Parallel IGBT
  BrTp =  $NB  $Ntop   BREAKER  $RTOFF

  BRN =  $NA  $NB   BREAKER $RTOFF]]></segment>
        <segment name="Dsdyn"><![CDATA[#STORAGE REAL:$(DIM1)
#STORAGE STOR:75 INTEGER:24 REAL:21 LOGICAL:6 RTCL:3 RTCI:3 RTCF:18

#BEGIN
      #LOCAL REAL Rmin
      Call Retrieve_Rmin(Rmin,$SS)
      ! Equivalent resistance setup
      CALL E_VARRLC1_CFG(0 ,$SS , $BRN, 0)
      ! Series Diode
      CALL PESWITCH1_CFG(0, 0, Rmin, 100e6, 10.0e8, 10.0e8, 0.0, 0.0)
      ! Series IGBT
      CALL PESWITCH1_CFG(3, 0, Rmin, 100e6, 10.0e8, 10.0e8, 0.0, 0.0)
      ! Parallel IGBT
      CALL PESWITCH1_CFG(3, 0, $RDON*DBLE($Dim), 100e6, 10.0e8, 10.0e8, 0.0, 0.0)
#ENDBEGIN

#LOCAL REAL Rth
#LOCAL REAL Vth
#LOCAL REAL Ibr
#LOCAL REAL CfgSign
#LOCAL INTEGER BlkFlag_tmp
#LOCAL INTEGER BlkFlag
      BlkFlag = 0

      CALL Block_Finder($Dim,$FP1,$FP2,BlkFlag_tmp)

      Ibr = CBR($BRN,$SS)


      CALL HalfCell(Ibr,$FP1,$FP2,$C,$Dim,$RP,$RTON,$RTOFF,$RDON,$RDOFF,BlkFlag,$VC,$IC,$SumVc0,Rth,Vth)

     
      
      ! Series diode
      CALL PESWITCH1_EXE($SS,$BrDs,1,0.0)

      IF (BlkFlag.EQ.1) THEN
        CALL E_VARRLC1_EXE(0 ,$SS , $BRN, 0, Rth, -Vth)
      ! Series IGBT
        CALL PESWITCH1_EXE($SS,$BrTs,0,0.0)
      ! Parallel IGBT
        CALL PESWITCH1_EXE($SS,$BrTp,1,0.0)
      ELSEIF (BlkFlag.EQ.0) THEN
        CALL E_VARRLC1_EXE(0 ,$SS , $BRN, 0, Rth, -Vth)
      ! Series thyristor
        CALL PESWITCH1_EXE($SS,$BrTs,1,0.0)
      ! Parallel thyristor
        CALL PESWITCH1_EXE($SS,$BrTp,0,0.0)
      ENDIF


      ! remove effect of interpolation/extrapolation locally in this model only.
      EBRD($BRN,$SS) = EBR($BRN,$SS)
#STORAGE REAL:20]]></segment>
        <segment name="Computations"><![CDATA[INTEGER DIM1 = 3*DIM]]></segment>
        <segment name="Dsout"><![CDATA[      #OUTPUT REAL Vdiff {VDC($Ntop,$SS)-VDC($NB,$SS)}
      #OUTPUT REAL CUR {CBR($BrDs,$SS) - CBR($BrTs,$SS) - CBR($BrTp,$SS)}]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="CMultiplexer" group="" url="" version="" build="" crc="127241654" instances="29" key="" view="false" date="0" id="346125365">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Name" name="Name" group="" type="Text" helpmode="Append">
            <value />
            <cond />
            <help />
            <regex />
            <error_msg />
          </parameter>
          <parameter desc="Input Dimension" name="IDim" group="" unit="" min="2" max="2147483647" content_type="Literal" type="Integer" helpmode="Append" intent="Input">
            <value><![CDATA[0]]></value>
            <cond>
            </cond>
            <help>
            </help>
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Transfer" name="In:IDim" x="-36" y="-18" dim="0" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Out" x="54" y="-18" dim="1" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Select" x="0" y="36" dim="1" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-18" y="-43" width="54" height="52" stroke="Black" stroke-dasharray="none" stroke-width="0.2" fill-style="Solid" fill-fg="Aqua" fill-bg="Transparent" />
        <line x1="36" y1="-18" x2="54" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <text x="48" y="-21" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Y]]></text>
        <text x="8" y="4" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[MUX]]></text>
        <line x1="-36" y1="-18" x2="-18" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-23" y1="-23" x2="-18" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-18" y1="-18" x2="-23" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-36" y1="-18" x2="-18" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <text x="-28" y="-21" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[I]]></text>
        <line x1="-23" y1="-23" x2="-18" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-18" y1="-18" x2="-23" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="0" y1="37" x2="0" y2="10" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <text x="-4" y="31" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[S]]></text>
        <line x1="-5" y1="16" x2="0" y2="10" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="0" y1="10" x2="5" y2="16" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <text x="9" y="-20" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[(%IDim)->1]]></text>
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[      IF($Select.GT.0) THEN
        $Out = $In(MIN($Select,$IDim))
      ELSE
        $Out = 0.0
      ENDIF]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="FiringBlockVSC" group="" url="" version="" build="" crc="54960594" instances="6" key="" view="false" date="0" id="1267233855">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="360" h="400" splitter="70">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Configuration" name="Config" group="" type="Choice" helpmode="Append">
            <value><![CDATA[1]]></value>
            <cond />
            <help />
            <choice><![CDATA[1 = Bypass at top]]></choice>
            <choice><![CDATA[2 = Bypass at btm]]></choice>
          </parameter>
          <parameter desc="# of cells per arm" name="DimFb" group="" unit="" min="2" max="10000" content_type="Literal" type="Integer" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[10]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Assign Top/Btm Num of cells internally?" name="T_B" group="" type="Choice" helpmode="Append">
            <value><![CDATA[1]]></value>
            <cond />
            <help />
            <choice><![CDATA[1 = Yes]]></choice>
            <choice><![CDATA[0 = No]]></choice>
          </parameter>
          <parameter desc="Top or Bottom Arm?" name="TBLogic" group="Optional" type="Choice" helpmode="Append">
            <value><![CDATA[1]]></value>
            <cond><![CDATA[T_B==1]]></cond>
            <help />
            <choice><![CDATA[1 = Top]]></choice>
            <choice><![CDATA[-1 = Btm]]></choice>
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200" size="2">
        <port model="Transfer" name="Ncells" x="-90" y="-18" dim="1" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="T1:DimFb" x="108" y="-18" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[Config==1]]></port>
        <port model="Transfer" name="Iac" x="-18" y="-54" dim="1" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="T2:DimFb" x="108" y="36" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[Config==1]]></port>
        <port model="Transfer" name="Idx:DimFb" x="-90" y="36" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Block" x="18" y="72" dim="1" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="T1:DimFb" x="108" y="36" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[Config==2]]></port>
        <port model="Transfer" name="T2:DimFb" x="108" y="-18" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[Config==2]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-39" y="-39" width="105" height="93" stroke="Blue" stroke-width="0.2" stroke-dasharray="none" fill-style="Hollow" fill-fg="Black" fill-bg="Black" />
        <text x="-7" y="-5" stroke="black" font-size="Small" text-anchor="Middle">Firing</text>
        <text x="-7" y="8" stroke="black" font-size="Small" text-anchor="Middle">Block</text>
        <line x1="-90" y1="-18" x2="-29" y2="-18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-44" y1="-23" x2="-39" y2="-18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-44" y1="-13" x2="-39" y2="-18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-58" y="-24" stroke="black" font-size="Small" text-anchor="Middle">#Cells</text>
        <cond><![CDATA[Config==1]]></cond>
        <line x1="107" y1="-18" x2="63" y2="-18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <cond><![CDATA[true]]></cond>
        <text x="-4" y="-45" stroke="black" font-size="Small" text-anchor="Middle">Iac</text>
        <line x1="-23" y1="-44" x2="-18" y2="-39" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-13" y1="-44" x2="-18" y2="-39" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-18" y1="-54" x2="-18" y2="-23" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-7" y="26" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(%DimFb)]]></text>
        <cond><![CDATA[Config==1]]></cond>
        <ellipse cx="60" cy="-18" rx="3" ry="3" stroke="Black" stroke-dasharray="none" stroke-width="0.2" fill-style="Hollow" fill-fg="Black" fill-bg="Transparent" />
        <line x1="40" y1="-9" x2="57" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="40" y1="-27" x2="40" y2="-9" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="57" y1="-18" x2="40" y2="-27" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="33" y1="-18" x2="40" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <cond><![CDATA[true]]></cond>
        <line x1="15" y1="4" x2="33" y2="4" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="33" y1="-18" x2="33" y2="36" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <cond><![CDATA[Config==1]]></cond>
        <line x1="107" y1="36" x2="33" y2="36" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <cond><![CDATA[true]]></cond>
        <text x="51" y="30" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[T2]]></text>
        <text x="54" y="-1" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[T1]]></text>
        <rect x="-29" y="-23" width="44" height="66" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" fill-style="Hollow" fill-fg="Black" fill-bg="Transparent" />
        <text x="-58" y="30" stroke="black" font-size="Small" text-anchor="Middle">Index</text>
        <line x1="-44" y1="41" x2="-39" y2="36" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-44" y1="31" x2="-39" y2="36" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-90" y1="36" x2="-29" y2="36" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-64" y="47" stroke="black" font-size="Small" text-anchor="Middle">(-) to (+)</text>
        <line x1="13" y1="59" x2="18" y2="54" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="23" y1="59" x2="18" y2="54" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="40" y="67" stroke="black" font-size="Small" text-anchor="Middle">Block</text>
        <line x1="18" y1="54" x2="18" y2="72" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <cond><![CDATA[Config==2]]></cond>
        <text x="86" y="31" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[Bypass]]></text>
        <line x1="33" y1="36" x2="40" y2="36" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="57" y1="36" x2="40" y2="45" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="40" y1="45" x2="40" y2="27" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="40" y1="27" x2="57" y2="36" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <ellipse cx="60" cy="36" rx="3" ry="3" stroke="Black" stroke-dasharray="none" stroke-width="0.2" fill-style="Hollow" fill-fg="Black" fill-bg="Transparent" />
        <line x1="107" y1="36" x2="63" y2="36" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="108" y1="-18" x2="33" y2="-18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <cond><![CDATA[Config==1]]></cond>
        <text x="87" y="-24" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[Bypass]]></text>
        <cond><![CDATA[TBLogic==1&&(T_B==1)]]></cond>
        <text x="46" y="-45" stroke="black" font-size="Small" text-anchor="Middle">Top</text>
        <cond><![CDATA[TBLogic==-1&&(T_B==1)]]></cond>
        <text x="45" y="-44" stroke="black" font-size="Small" text-anchor="Middle">Btm</text>
      </svg>
      <script>
        <segment name="Dsdyn"><![CDATA[      #STORAGE INTEGER:$(DimK)
      #LOCAL INTEGER DimIn
      #IF T_B==1
      IF ($TBLogic.EQ.1) THEN
        DimIn = $DimFb-$Ncells
      ELSE
        DimIn = $Ncells
      ENDIF
      #ENDIF
      
      CALL MMC_Firing_Ctrl($Ncells,$Idx,$DimFb,$Iac,$Block,$T1,$T2)]]></segment>
        <segment name="Computations"><![CDATA[INTEGER DimK = 3*DimFb+2]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="breakout3" url="" version="" build="" crc="69509984" instances="6" view="false" date="0" id="65848243">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form>
        <category name="General">
          <cond />
          <parameter desc="Name" name="Name" group="" type="Text">
            <value />
            <cond />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <port model="Natural" name="N" x="-18" y="0" dim="2" mode="Electrical" type="NonRemovable"><![CDATA[true]]></port>
        <port model="Natural" name="N1" x="18" y="-18" dim="1" mode="Electrical" type="NonRemovable"><![CDATA[true]]></port>
        <port model="Natural" name="N2" x="18" y="18" dim="1" mode="Electrical" type="NonRemovable"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <line x1="-18" y1="0" x2="-6" y2="0" stroke="Black" stroke-width="0.4" stroke-dasharray="none" />
        <line x1="18" y1="-18" x2="3" y2="-18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <line x1="18" y1="18" x2="3" y2="18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <ellipse cx="-1" cy="0" rx="6" ry="5" stroke="Black" stroke-dasharray="none" stroke-width="0.2" fill-style="Hollow" fill-fg="Black" fill-bg="Transparent" />
        <line x1="3" y1="-18" x2="0" y2="-4" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="3" y1="18" x2="0" y2="4" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <rect x="12" y="-23" width="3" height="3" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" fill-style="Solid" fill-fg="Navy" fill-bg="Transparent" />
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="Sorter" group="" url="" version="" build="" crc="15331001" instances="16" key="" view="false" date="0" id="86558404">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="360" h="400" splitter="70">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Dimension of vector" name="DimIdx" group="" unit="" min="2" max="2147483647" content_type="Literal" type="Integer" helpmode="Append" intent="Input">
            <value><![CDATA[10]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Sort order" name="SType" group="" type="Choice" helpmode="Append">
            <value><![CDATA[2]]></value>
            <cond />
            <help />
            <choice><![CDATA[1 = (+) to (-)]]></choice>
            <choice><![CDATA[2 = (-) to (+)]]></choice>
          </parameter>
          <parameter desc="Output sorted vector?" name="OutV" group="" type="Choice" helpmode="Append">
            <value><![CDATA[0]]></value>
            <cond />
            <help />
            <choice><![CDATA[0 = No]]></choice>
            <choice><![CDATA[1 = Yes]]></choice>
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
          <param name="monitor_bus_voltage" value="0" />
        </paramlist>
        <port model="Transfer" name="Vcap:DimIdx" x="-72" y="0" dim="0" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Indx:DimIdx" x="72" y="0" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="SOrder" x="0" y="-54" dim="1" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Out2:DimIdx" x="18" y="54" dim="0" mode="Output" type="Real" internal="false"><![CDATA[OutV==1]]></port>
        <port model="Transfer" name="Out2:DimIdx" x="0" y="0" dim="0" mode="Output" type="Real" internal="false"><![CDATA[OutV==0]]></port>
        <cond><![CDATA[true]]></cond>
        <text x="1" y="-13" stroke="black" font-size="Small" text-anchor="Middle">Indexer</text>
        <line x1="-72" y1="0" x2="-29" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-34" y1="-5" x2="-29" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-34" y1="5" x2="-29" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-46" y="-7" stroke="black" font-size="Small" text-anchor="Middle">Vin</text>
        <line x1="72" y1="0" x2="29" y2="0" stroke="Blue" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="50" y="-7" stroke="black" font-size="Small" text-anchor="Middle">Index</text>
        <cond><![CDATA[SType==1]]></cond>
        <text x="2" y="12" stroke="black" font-size="Small" text-anchor="Middle">(+) to (-)</text>
        <cond><![CDATA[SType==2]]></cond>
        <text x="1" y="3" stroke="black" font-size="Small" text-anchor="Middle">(-) to (+)</text>
        <cond><![CDATA[true]]></cond>
        <line x1="-5" y1="-34" x2="0" y2="-29" stroke="Blue" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="5" y1="-34" x2="0" y2="-29" stroke="Blue" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="0" y1="-54" x2="0" y2="-29" stroke="Blue" stroke-width="0.2" stroke-dasharray="none" port="" />
        <cond><![CDATA[OutV==1]]></cond>
        <line x1="18" y1="54" x2="7" y2="54" stroke="Teal" stroke-width="0.2" stroke-dasharray="none" port="" />
        <cond><![CDATA[true]]></cond>
        <text x="22" y="-41" stroke="black" font-size="Small" text-anchor="Middle">Sorder</text>
        <rect x="-29" y="-29" width="58" height="59" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" fill-style="Hollow" fill-fg="Black" fill-bg="Transparent" port="" />
        <text x="6" y="26" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[x%DimIdx]]></text>
        <line x1="-45" y1="-4" x2="-48" y2="4" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-42" y1="-4" x2="-45" y2="4" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="50" y1="-4" x2="47" y2="4" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="53" y1="-4" x2="50" y2="4" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <cond><![CDATA[OutV==1]]></cond>
        <line x1="7" y1="54" x2="7" y2="30" stroke="Green" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="20" y="46" stroke="black" font-size="Small" text-anchor="Middle">Vout</text>
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[! Sorts only when the input 'Sort' equals 1. Otherwise the order stays constant
      #STORAGE INTEGER:$(DimIdx)
      CALL VSC_Sorter($DimIdx,$Vcap,$SOrder,$SType,$Indx)
      #IF (OutV==1)
      #LOCAL INTEGER Ki
      DO Ki=1,$DimIdx
        $Out2(Ki) = $Vcap($Indx(Ki))
      END DO
      #ENDIF]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="MultCarrierGen" group="" url="" version="" build="" crc="27068445" instances="5" key="" view="false" date="0" id="1005768562">
      <paramlist>
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="550" h="400" splitter="50">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Track fundamental frequency?" name="FLogic" group="1. General" type="Choice" helpmode="Append">
            <value><![CDATA[0]]></value>
            <cond />
            <help />
            <choice><![CDATA[0 = No]]></choice>
            <choice><![CDATA[1 = Yes]]></choice>
          </parameter>
          <parameter type="Real" name="Ps0" desc="Initial phase shift [deg]" group="2. Constant frequency" helpmode="Append" content_type="Constant" intent="Input" min="" max="" unit="deg" dim="1">
            <value><![CDATA[0.0 [deg]]]></value>
            <help><![CDATA[]]></help>
            <cond><![CDATA[FLogic==0]]></cond>
          </parameter>
          <parameter type="Real" name="F" desc="Fundamental frequency" group="2. Constant frequency" helpmode="Append" content_type="Constant" intent="Input" min="" max="" unit="Hz" dim="1">
            <value><![CDATA[60.0 [Hz]]]></value>
            <help>
            </help>
            <cond><![CDATA[FLogic==0]]></cond>
          </parameter>
          <parameter type="Choice" name="PMode" desc="Angle input mode" group="1. General" helpmode="Append">
            <value><![CDATA[1]]></value>
            <cond><![CDATA[FLogic==1]]></cond>
            <help />
            <choice><![CDATA[0 = Radians]]></choice>
            <choice><![CDATA[1 = Degrees]]></choice>
          </parameter>
          <parameter type="Integer" name="DimC" desc="Number of carriers" group="1. General" helpmode="Append" content_type="Literal" intent="Input" min="2" max="" unit="" dim="1">
            <value><![CDATA[10]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Real" name="Cfreq" desc="Carrier frequency as multiple of fundamental" group="1. General" helpmode="Append" content_type="Variable" intent="Input" min="" max="" unit="Hz" dim="1">
            <value><![CDATA[33]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Choice" name="Type" desc="Type of carrier" group="1. General" helpmode="Append">
            <value><![CDATA[1]]></value>
            <regex />
            <error_msg />
            <help />
            <cond />
            <choice><![CDATA[1 = PD: Phase disposition]]></choice>
            <choice><![CDATA[2 = APOD: Alternative phase oposition disposition]]></choice>
            <choice><![CDATA[3 = PS: Phase shifted]]></choice>
          </parameter>
          <parameter type="Real" name="Max" desc="Max" group="1. General" helpmode="Append" content_type="Literal" intent="Input" min="" max="" unit="" dim="1">
            <value><![CDATA[1.0]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
          <parameter type="Real" name="Min" desc="Min" group="1. General" helpmode="Append" content_type="Literal" intent="Input" min="" max="" unit="" dim="1">
            <value><![CDATA[0.0]]></value>
            <help><![CDATA[]]></help>
            <cond />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200" size="2">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Transfer" name="Carr:DimC" x="72" y="0" dim="0" mode="Output" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="ThetaIn" x="-72" y="0" dim="1" mode="Input" type="Real" internal="false"><![CDATA[FLogic==1]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-33" y="-32" width="65" height="70" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" fill-style="Hollow" fill-fg="Black" fill-bg="Transparent" port="" />
        <line x1="71" y1="0" x2="32" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="Carr:DimC" />
        <cond><![CDATA[Type==1]]></cond>
        <text x="0" y="-4" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[PD]]></text>
        <cond><![CDATA[Type==2]]></cond>
        <text x="0" y="-4" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[APOD]]></text>
        <cond><![CDATA[Type==3]]></cond>
        <text x="0" y="0" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[PS]]></text>
        <cond><![CDATA[true]]></cond>
        <text x="57" y="15" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[%DimC]]></text>
        <cond><![CDATA[Type==1||Type==2]]></cond>
        <line x1="0" y1="32" x2="3" y2="21" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="6" y1="32" x2="3" y2="22" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="12" y1="32" x2="9" y2="22" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="6" y1="32" x2="9" y2="21" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="18" y1="32" x2="21" y2="21" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="24" y1="32" x2="21" y2="22" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="18" y1="32" x2="15" y2="22" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="12" y1="32" x2="15" y2="21" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-12" y1="32" x2="-9" y2="21" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-6" y1="32" x2="-9" y2="22" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="0" y1="32" x2="-3" y2="22" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-6" y1="32" x2="-3" y2="21" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-18" y1="32" x2="-15" y2="21" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-12" y1="32" x2="-15" y2="22" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-28" y1="32" x2="29" y2="32" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-18" y1="32" x2="-21" y2="22" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-24" y1="32" x2="-21" y2="21" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <cond><![CDATA[Type==1]]></cond>
        <line x1="-24" y1="22" x2="-21" y2="11" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-18" y1="22" x2="-21" y2="12" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-12" y1="22" x2="-15" y2="12" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-18" y1="22" x2="-15" y2="11" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-6" y1="22" x2="-3" y2="11" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="0" y1="22" x2="-3" y2="12" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-6" y1="22" x2="-9" y2="12" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-12" y1="22" x2="-9" y2="11" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="12" y1="22" x2="15" y2="11" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="18" y1="22" x2="15" y2="12" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="24" y1="22" x2="21" y2="12" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="18" y1="22" x2="21" y2="11" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="6" y1="22" x2="9" y2="11" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="12" y1="22" x2="9" y2="12" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="6" y1="22" x2="3" y2="12" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="0" y1="22" x2="3" y2="11" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <cond><![CDATA[Type==1||Type==2]]></cond>
        <line x1="0" y1="11" x2="3" y2="0" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="6" y1="11" x2="3" y2="1" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="12" y1="11" x2="9" y2="1" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="6" y1="11" x2="9" y2="0" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="18" y1="11" x2="21" y2="0" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="24" y1="11" x2="21" y2="1" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="18" y1="11" x2="15" y2="1" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="12" y1="11" x2="15" y2="0" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-12" y1="11" x2="-9" y2="0" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-6" y1="11" x2="-9" y2="1" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="0" y1="11" x2="-3" y2="1" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-6" y1="11" x2="-3" y2="0" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-18" y1="11" x2="-15" y2="0" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-12" y1="11" x2="-15" y2="1" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-18" y1="11" x2="-21" y2="1" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-24" y1="11" x2="-21" y2="0" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <cond><![CDATA[Type==2]]></cond>
        <line x1="0" y1="10" x2="3" y2="21" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="6" y1="10" x2="3" y2="20" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="12" y1="10" x2="9" y2="20" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="6" y1="10" x2="9" y2="21" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="18" y1="10" x2="21" y2="21" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="24" y1="10" x2="21" y2="20" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="18" y1="10" x2="15" y2="20" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="12" y1="10" x2="15" y2="21" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-12" y1="10" x2="-9" y2="21" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-6" y1="10" x2="-9" y2="20" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="0" y1="10" x2="-3" y2="20" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-6" y1="10" x2="-3" y2="21" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-18" y1="10" x2="-15" y2="21" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-12" y1="10" x2="-15" y2="20" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-18" y1="10" x2="-21" y2="20" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-24" y1="10" x2="-21" y2="21" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <cond><![CDATA[Type==3]]></cond>
        <line x1="-4" y1="32" x2="-10" y2="13" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-8" y1="32" x2="-14" y2="13" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-16" y1="32" x2="-10" y2="13" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-20" y1="32" x2="-14" y2="13" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-12" y1="32" x2="-18" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-24" y1="32" x2="-18" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-26" y1="32" x2="26" y2="32" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-12" y1="32" x2="-6" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="0" y1="32" x2="-6" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-8" y1="32" x2="-2" y2="13" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-4" y1="32" x2="2" y2="13" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="4" y1="32" x2="-2" y2="13" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="8" y1="32" x2="2" y2="13" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="20" y1="32" x2="24" y2="20" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="24" y1="20" x2="22" y2="13" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="16" y1="32" x2="22" y2="13" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="4" y1="32" x2="10" y2="13" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="16" y1="32" x2="10" y2="13" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="8" y1="32" x2="14" y2="13" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="12" y1="32" x2="18" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="20" y1="32" x2="14" y2="13" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="24" y1="32" x2="18" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="0" y1="32" x2="6" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="12" y1="32" x2="6" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-20" y1="32" x2="-24" y2="19" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-16" y1="32" x2="-22" y2="13" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-24" y1="19" x2="-22" y2="13" stroke="Red" stroke-dasharray="none" stroke-width="0.2" port="" />
        <cond><![CDATA[true]]></cond>
        <text x="-1" y="-16" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Carrier]]></text>
        <line x1="54" y1="-4" x2="51" y2="4" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="57" y1="-4" x2="54" y2="4" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <cond><![CDATA[FLogic==1]]></cond>
        <line x1="-33" y1="0" x2="-72" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="Carr:DimC" />
        <line x1="-33" y1="0" x2="-39" y2="2" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-33" y1="0" x2="-39" y2="-2" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
      </svg>
      <script>
        <segment name="Dsdyn"><![CDATA[      #LOCAL REAL ThetaC
      #LOCAL REAL ThetaOut 2
      #LOCAL REAL ThetaTmp
      #LOCAL INTEGER Kind
      #LOCAL REAL MaxK
      #LOCAL REAL MinK

#BEGIN
  #IF FLogic==0
      CALL COMPONENT_ID(ICALL_NO,$#Component)
      CALL E_XSGEN1_CFG(1,$Ps0,100,2.0*pi_,0.0)
  #ENDIF
#ENDBEGIN



#IF FLogic==1
      !  if tracking frequency
      !  angle resolver   
  #IF PMode==1
      !  If Degrees
      ThetaC = $ThetaIn*pi_/180.0
  #ELSE
      !  if Radians
      ThetaC = $ThetaIn
  #ENDIF

#ENDIF

#IF FLogic==0
 !  if fixed frequency (no tracking), then generate a saw thoot function
  #STORAGE REAL:6 LOGICAL:1 RTCF:4
#ENDIF

  #IF FLogic==0
      CALL COMPONENT_ID(ICALL_NO,$#Component)
      CALL E_XSGEN1_EXE(1,$F,ThetaOut)
      ThetaC = ThetaOut(1)
  #ENDIF







 #IF (Type==1||Type==2)     
      !  Phase disposition and alternative phase disposition
      ThetaC = ThetaC * $Cfreq
      !  Angle resolver 
      ThetaC = ATAN2(sin(ThetaC),cos(ThetaC))
      IF (ThetaC.LE. 0.0) THEN
        ThetaC = ThetaC + TWO_PI
      ENDIF
      !  Per unitization of Theta
      ThetaC = 2.0*ThetaC/TWO_PI
      IF(ThetaC.GE.1.0) THEN
        ThetaC = 2.0 - ThetaC
      ENDIF

      DO Kind=1,$DimC
      #IF (Type==1)
          MinK = $Min + DBLE(Kind-1)*($Max-$Min)/DBLE($DimC)
          MaxK = MinK + ($Max-$Min)/DBLE($DimC)
          $Carr(Kind) = ThetaC*(MaxK-MinK) + MinK
      #ELSEIF (Type==2)
          MinK = $Min + DBLE(Kind-1)*($Max-$Min)/DBLE($DimC)
          MaxK = MinK + ($Max-$Min)/DBLE($DimC)
          IF(INT(INT(Kind*0.5)*2).NE.Kind) THEN
            ! if odd number
          $Carr(Kind) = ThetaC*(MaxK-MinK) + MinK
          ELSE
            ! if even number
            $Carr(Kind) = MaxK - ThetaC*(MaxK-MinK)
          ENDIF          
      #ENDIF
      END DO
#ELSEIF Type==3
      !  Phase shifting
      ThetaC = ThetaC * $Cfreq
      DO Kind=1,$DimC
        ThetaTmp = ThetaC + 2.0*pi_/DBLE($DimC)*DBLE(Kind-1)
        !  Angle resolver 
        ThetaTmp = ATAN2(sin(ThetaTmp),cos(ThetaTmp))
        IF (ThetaTmp.LE. 0.0) THEN
          ThetaTmp = ThetaTmp + TWO_PI
        ENDIF
        !  Per unitization of Theta
        ThetaTmp = 2.0*ThetaTmp/TWO_PI
        IF(ThetaTmp.GE.1.0) THEN
          ThetaTmp = 2.0 - ThetaTmp
        ENDIF
        ThetaTmp = ThetaTmp*($Max-$Min) + $Min
        $Carr(Kind) = ThetaTmp
      END DO
#ENDIF]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="MDimComparator" group="" url="" version="" build="" crc="36841535" instances="10" key="" view="false" date="0" id="1799256707">
      <paramlist>
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration" visible="true">
          <cond />
          <parameter desc="Individual modulating waves?" name="Type" group="" type="Choice" helpmode="Append">
            <value><![CDATA[0]]></value>
            <cond />
            <help />
            <choice><![CDATA[0 = No]]></choice>
            <choice><![CDATA[1 = Yes]]></choice>
          </parameter>
          <parameter desc="Display details?" name="Disp" group="" type="Choice" helpmode="Append">
            <value><![CDATA[1]]></value>
            <cond />
            <help />
            <choice><![CDATA[1 = Yes]]></choice>
            <choice><![CDATA[0 = No]]></choice>
          </parameter>
          <parameter desc="Number of carriers" name="DimC" group="" unit="" min="2" max="2147483647" content_type="Literal" type="Integer" helpmode="Append" intent="Input">
            <value><![CDATA[10]]></value>
            <cond>
            </cond>
            <help>
            </help>
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
          <param name="monitor_bus_voltage" value="0" />
        </paramlist>
        <port model="Transfer" name="Mwave" x="-72" y="-18" dim="1" mode="Input" type="Real" internal="false"><![CDATA[Type==0]]></port>
        <port model="Transfer" name="Carr:DimC" x="-72" y="18" dim="0" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Out:DimC" x="72" y="-18" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[Type==1]]></port>
        <port model="Transfer" name="NumOut" x="72" y="-18" dim="1" mode="Output" type="Integer" internal="false"><![CDATA[Type==0]]></port>
        <port model="Transfer" name="Mwave:DimC" x="-72" y="-18" dim="0" mode="Input" type="Real" internal="false"><![CDATA[Type==1]]></port>
        <port model="Transfer" name="SortOrd" x="72" y="18" dim="1" mode="Output" type="Integer" internal="false"><![CDATA[Type==0]]></port>
        <port model="Transfer" name="Blk" x="0" y="72" dim="1" mode="Input" type="Integer" internal="false"><![CDATA[Type==0]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-30" y="-32" width="60" height="71" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" fill-style="Hollow" fill-fg="Black" fill-bg="Transparent" port="" />
        <line x1="-72" y1="-18" x2="-30" y2="-18" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="Mwave" />
        <line x1="-30" y1="-18" x2="-35" y2="-23" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="Mwave" />
        <line x1="-30" y1="-18" x2="-35" y2="-13" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="Mwave" />
        <text x="-50" y="-24" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Mwave]]></text>
        <line x1="-71" y1="18" x2="-30" y2="18" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="Carr:DimC" />
        <line x1="-30" y1="18" x2="-35" y2="13" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="Carr:DimC" />
        <line x1="-30" y1="18" x2="-35" y2="23" stroke="Black" stroke-dasharray="none" stroke-width="ByNode" port="Carr:DimC" />
        <text x="-57" y="12" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[Carr]]></text>
        <line x1="71" y1="-18" x2="30" y2="-18" stroke="Blue" stroke-dasharray="none" stroke-width="ByNode" port="Out:DimC" />
        <text x="6" y="35" stroke="Black" fill="Black" font-size="Small" text-anchor="Middle"><![CDATA[x%DimC]]></text>
        <cond><![CDATA[Type==0]]></cond>
        <line x1="72" y1="18" x2="30" y2="18" stroke="Blue" stroke-dasharray="none" stroke-width="ByNode" port="" />
        <text x="52" y="-24" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[#Cells]]></text>
        <text x="49" y="30" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[Sort]]></text>
        <cond><![CDATA[Type==1]]></cond>
        <text x="46" y="-21" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[FP]]></text>
        <cond><![CDATA[Type==1&&Disp==1]]></cond>
        <text x="59" y="-4" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(%DimC)]]></text>
        <cond><![CDATA[true]]></cond>
        <text x="1" y="-20" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[Compa-]]></text>
        <cond><![CDATA[Type==1&&Disp==1]]></cond>
        <text x="-54" y="-6" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(%DimC)]]></text>
        <cond><![CDATA[Disp==1]]></cond>
        <text x="-54" y="30" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(%DimC)]]></text>
        <cond><![CDATA[Type==1]]></cond>
        <line x1="55" y1="-22" x2="52" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="58" y1="-22" x2="55" y2="-14" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-46" y1="-23" x2="-49" y2="-15" stroke="Green" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-43" y1="-23" x2="-46" y2="-15" stroke="Green" stroke-dasharray="none" stroke-width="0.2" port="" />
        <cond><![CDATA[true]]></cond>
        <line x1="-44" y1="13" x2="-47" y2="21" stroke="Green" stroke-dasharray="none" stroke-width="0.2" port="" />
        <line x1="-47" y1="13" x2="-50" y2="21" stroke="Green" stroke-dasharray="none" stroke-width="0.2" port="" />
        <text x="-1" y="-8" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[rator]]></text>
        <line x1="-1" y1="2" x2="7" y2="22" stroke="Red" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="7" y1="22" x2="15" y2="2" stroke="Red" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-9" y1="22" x2="-1" y2="2" stroke="Red" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="8" y1="2" x2="16" y2="22" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="0" y1="22" x2="8" y2="2" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-16" y1="2" x2="-16" y2="22" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-16" y1="22" x2="20" y2="22" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-16" y1="22" x2="-8" y2="2" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-8" y1="2" x2="0" y2="22" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-16" y1="5" x2="16" y2="14" stroke="Blue" stroke-dasharray="none" stroke-width="0.2" port="" />
        <cond><![CDATA[Type==0]]></cond>
        <line x1="0" y1="39" x2="0" y2="72" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" />
        <text x="16" y="61" stroke="black" font-size="Small" text-anchor="Middle">Block</text>
        <line x1="5" y1="44" x2="0" y2="39" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-5" y1="44" x2="0" y2="39" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[      #LOCAL INTEGER Kix
      #LOCAL INTEGER NoCx
      #STORAGE INTEGER:2

      ! Note: the block signal is only used to force sorting whenever the system come out
      ! of blocking state

      ! Multiple carrier comparator component
      IF(TIMEZERO) THEN
        STORI(NSTORI) = 0
#IF Type==0
        STORI(NSTORI+1) = $Blk
#ELSE
        STORI(NSTORI+1) = 0
#ENDIF
      ENDIF

      
      
#IF Type==1
      DO Kix = 1,$DimC
        IF ($Mwave(Kix).GE.$Carr(Kix)) THEN
          $Out(Kix) = 1
        ELSE
          $Out(Kix) = 0
        ENDIF
      END DO
#ELSE
      NoCx = 0
      DO Kix = 1,$DimC
        IF ($Mwave.GE.$Carr(Kix)) THEN
          NoCx = NoCx + 1
        ENDIF
      ENDDO

      IF (STORI(NSTORI).NE.NoCx) THEN
        $SortOrd = 1
      ELSE
      ! Issue sort order if comming out of blocking state
        IF ((STORI(NSTORI+1).EQ.1).AND.($Blk.EQ.0)) THEN
          $SortOrd = 1
        ELSE
          $SortOrd = 0
        ENDIF
      ENDIF
      ! Stores information
      $NumOut = NoCx
      STORI(NSTORI) = NoCx
      STORI(NSTORI+1) = $Blk
#ENDIF

      NSTORI = NSTORI + 2]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="TimeComparatorX" group="" url="" version="" build="" crc="110703791" instances="6" key="" view="false" date="0" id="874598408">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration">
          <cond />
          <parameter desc="Name" name="Name" group="" type="Text">
            <value />
            <cond />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
          <param name="monitor_bus_voltage" value="0" />
        </paramlist>
        <port model="Transfer" name="In" x="-90" y="0" dim="1" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Out" x="54" y="0" dim="1" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-75" y="-17" width="114" height="32" stroke="Black" stroke-width="0.2" stroke-dasharray="none" fill-style="Solid" fill-fg="Aqua" fill-bg="Black" />
        <line x1="-90" y1="0" x2="-75" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-80" y1="-5" x2="-75" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-80" y1="5" x2="-75" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-90" y="0" stroke="black" font-size="small" text-anchor="Middle">In</text>
        <line x1="54" y1="0" x2="39" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="54" y="0" stroke="black" font-size="small" text-anchor="Middle">Out</text>
        <text x="-15" y="2" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[Is N(t) = N(t-dt) ?]]></text>
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[      #STORAGE INTEGER:1
      IF ($In.NE.STORI(NSTORI)) THEN
        $Out = 1
      ELSE
        $Out = 0
      ENDIF
      STORI(NSTORI) = $In
      NSTORI = NSTORI + 1]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="EQComparator" group="" url="" version="" build="" crc="76421838" instances="0" key="" view="false" date="0" id="605788959">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="400" splitter="60">
        <category name="Configuration">
          <cond />
          <parameter desc="Name" name="Name" group="" type="Text">
            <value />
            <cond />
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
          <param name="monitor_bus_voltage" value="0" />
        </paramlist>
        <port model="Transfer" name="A" x="-36" y="-18" dim="1" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="B" x="-36" y="18" dim="1" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="Out" x="36" y="0" dim="1" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-24" y="-25" width="44" height="53" stroke="Teal" stroke-width="0.4" stroke-dasharray="none" fill-style="Solid" fill-fg="Aqua" fill-bg="Black" />
        <text x="0" y="3" stroke="black" font-size="Small" text-anchor="Middle">A = B ?</text>
        <line x1="-36" y1="-18" x2="-24" y2="-18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-29" y1="-23" x2="-24" y2="-18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-29" y1="-13" x2="-24" y2="-18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-31" y="-24" stroke="black" font-size="small" text-anchor="Middle">A</text>
        <line x1="-36" y1="18" x2="-24" y2="18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-29" y1="13" x2="-24" y2="18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <line x1="-29" y1="23" x2="-24" y2="18" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="-34" y="11" stroke="black" font-size="small" text-anchor="Middle">B</text>
        <line x1="36" y1="0" x2="20" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" port="" />
        <text x="31" y="-5" stroke="black" font-size="small" text-anchor="Middle">Out</text>
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[	
      IF ($A.EQ.$B) THEN 
	$OUT = 1
      ELSE 
	$OUT = 0
      ENDIF]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="DataMer" url="" version="" build="" crc="104601461" instances="0" view="false" date="0" key="" id="2009981559">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form>
        <category name="General" visible="true">
          <cond />
          <parameter desc="Dimension of Input Channel 1" name="DIM_IN1" group="" type="Choice" helpmode="Append">
            <value><![CDATA[24]]></value>
            <cond>
            </cond>
            <help>
            </help>
            <choice><![CDATA[12 = 12]]></choice>
            <choice><![CDATA[24 = 24]]></choice>
            <choice><![CDATA[48 = 48]]></choice>
            <choice><![CDATA[96 = 96]]></choice>
          </parameter>
          <parameter desc="Dimension of Input Channel 2" name="DIM_IN2" group="" type="Choice" helpmode="Append">
            <value><![CDATA[24]]></value>
            <cond>
            </cond>
            <help>
            </help>
            <choice><![CDATA[2 = 2]]></choice>
            <choice><![CDATA[12 = 12]]></choice>
            <choice><![CDATA[14 = 14]]></choice>
            <choice><![CDATA[24 = 24]]></choice>
            <choice><![CDATA[48 = 48]]></choice>
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200" scrolly="796">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Transfer" name="IN1:DIM_IN1" x="-54" y="-36" dim="0" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="IN2:DIM_IN2" x="-54" y="36" dim="0" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="24" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==12 && DIM_IN2==12)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="96" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==48 && DIM_IN2==48)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="36" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==12 && DIM_IN2==24)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="60" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==48 && DIM_IN2==12)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="36" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==24 && DIM_IN2==12)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="60" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==12 && DIM_IN2==48)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="48" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==24 && DIM_IN2==24)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="72" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==24 && DIM_IN2==48)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="72" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==48 && DIM_IN2==24)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="120" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==96 && DIM_IN2==24)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="108" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==96 && DIM_IN2==12)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="144" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==96 && DIM_IN2==48)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="26" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==12 && DIM_IN2==14)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="38" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==24 && DIM_IN2==14)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="62" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==48 && DIM_IN2==14)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="110" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==96 && DIM_IN2==14)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="14" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==12 && DIM_IN2==2)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="26" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==24 && DIM_IN2==2)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="50" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==48 && DIM_IN2==2)]]></port>
        <port model="Transfer" name="OUT" x="54" y="0" dim="98" mode="Output" type="Real" internal="false"><![CDATA[(DIM_IN1==96 && DIM_IN2==2)]]></port>
        <cond><![CDATA[true]]></cond>
        <line x1="-37" y1="-31" x2="-34" y2="-23" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <line x1="-40" y1="-18" x2="-34" y2="-23" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <line x1="-40" y1="18" x2="-35" y2="23" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <line x1="-36" y1="30" x2="-35" y2="23" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <line x1="54" y1="0" x2="0" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <line x1="-54" y1="-36" x2="0" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-54" y1="36" x2="0" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <text x="-21" y="-24" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(%DIM_IN1)]]></text>
        <text x="-15" y="25" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(%DIM_IN2)]]></text>
        <cond><![CDATA[(DIM_IN1==12 && DIM_IN2==12)]]></cond>
        <text x="57" y="13" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(24)]]></text>
        <cond><![CDATA[(DIM_IN1==24 && DIM_IN2==12)]]></cond>
        <text x="53" y="13" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(36)]]></text>
        <cond><![CDATA[(DIM_IN1==12 && DIM_IN2==24)]]></cond>
        <text x="57" y="12" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(36)]]></text>
        <cond><![CDATA[(DIM_IN1==48 && DIM_IN2==12)]]></cond>
        <text x="45" y="12" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(60)]]></text>
        <cond><![CDATA[(DIM_IN1==12 && DIM_IN2==48)]]></cond>
        <text x="56" y="13" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(60)]]></text>
        <cond><![CDATA[(DIM_IN1==12 && DIM_IN2==14)]]></cond>
        <text x="45" y="13" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(26)]]></text>
        <cond><![CDATA[(DIM_IN1==24 && DIM_IN2==48)]]></cond>
        <text x="47" y="13" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(72)]]></text>
        <cond><![CDATA[(DIM_IN1==48 && DIM_IN2==24)]]></cond>
        <text x="47" y="12" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(72)]]></text>
        <cond><![CDATA[(DIM_IN1==48 && DIM_IN2==48)]]></cond>
        <text x="53" y="14" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(96)]]></text>
        <cond><![CDATA[(DIM_IN1==96 && DIM_IN2==12)]]></cond>
        <text x="55" y="15" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(108)]]></text>
        <cond><![CDATA[(DIM_IN1==96 && DIM_IN2==24)]]></cond>
        <text x="54" y="15" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(120)]]></text>
        <cond><![CDATA[(DIM_IN1==96 && DIM_IN2==48)]]></cond>
        <text x="56" y="16" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(144)]]></text>
        <cond><![CDATA[true]]></cond>
        <ellipse cx="-51" cy="-28" rx="2" ry="2" stroke="Black" stroke-dasharray="none" stroke-width="0.2" port="" fill-style="Solid" fill-fg="Blue" fill-bg="Transparent" />
        <cond><![CDATA[(DIM_IN1==24 && DIM_IN2==14)]]></cond>
        <text x="45" y="13" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(38)]]></text>
        <cond><![CDATA[(DIM_IN1==48 && DIM_IN2==14)]]></cond>
        <text x="45" y="13" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(62)]]></text>
        <cond><![CDATA[(DIM_IN1==96 && DIM_IN2==14)]]></cond>
        <text x="45" y="13" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(110)]]></text>
        <cond><![CDATA[(DIM_IN1==24 && DIM_IN2==24)]]></cond>
        <text x="45" y="11" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(48)]]></text>
        <cond><![CDATA[(DIM_IN1==12 && DIM_IN2==2)]]></cond>
        <text x="45" y="12" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(14)]]></text>
        <cond><![CDATA[(DIM_IN1==24 && DIM_IN2==2)]]></cond>
        <text x="45" y="12" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(26)]]></text>
        <cond><![CDATA[(DIM_IN1==48 && DIM_IN2==2)]]></cond>
        <text x="45" y="12" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(50)]]></text>
        <cond><![CDATA[(DIM_IN1==96 && DIM_IN2==2)]]></cond>
        <text x="45" y="12" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(98)]]></text>
      </svg>
      <script>
        <segment name="Dsdyn"><![CDATA[! THIS BLOCK MERGES TWO INPUTS (EACH HAVING 12 DIMENSIONS) INTO A SINGLE VARIBLE OF 24 DIMENSIONS
      #LOCAL INTEGER Idx_x1 
      #LOCAL INTEGER DimX
!
      DimX = $DIM_IN1 + $DIM_IN2
      DO Idx_x1 = 1,$DIM_IN1
         $OUT(Idx_x1) = $IN1(Idx_x1)
      ENDDO
      DO Idx_x1 = $DIM_IN1+1, DimX
         $OUT(Idx_x1) = $IN2(Idx_x1-$DIM_IN1)
      ENDDO
!]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="InvM" url="" version="" build="" crc="124493936" instances="0" view="false" date="0" key="" id="1584379898">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form>
        <category name="General" visible="true">
          <cond />
          <parameter desc="Dimension of Input Vector" name="DimInv" group="" unit="" min="1" max="" content_type="Variable" type="Integer" helpmode="Append" intent="Input">
            <value><![CDATA[2]]></value>
            <cond>
            </cond>
            <help>
            </help>
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
          <param name="monitor_bus_voltage" value="0" />
        </paramlist>
        <port model="Transfer" name="IN:DimInv" x="-36" y="0" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="OUT:DimInv" x="36" y="0" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <line x1="-36" y1="0" x2="-21" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <line x1="-26" y1="-5" x2="-21" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <line x1="-26" y1="5" x2="-21" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <line x1="36" y1="0" x2="12" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <ellipse cx="9" cy="0" rx="3" ry="3" stroke="Black" stroke-dasharray="none" stroke-width="0.2" fill-style="Hollow" fill-fg="Black" fill-bg="Transparent" />
        <line x1="-11" y1="9" x2="6" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-11" y1="-9" x2="-11" y2="9" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="6" y1="0" x2="-11" y2="-9" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <line x1="-21" y1="0" x2="-11" y2="0" stroke="Black" stroke-dasharray="none" stroke-width="0.2" />
        <text x="-30" y="-10" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[(%DimInv)]]></text>
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[! This block inverts the input signal
      #LOCAL INTEGER k_inv
!
      DO k_inv = 1,$DimInv
         IF ($IN(k_inv) .NE. 0) THEN
            $OUT(k_inv) = 0
         ELSE
            $OUT(k_inv) = 1
         ENDIF
      ENDDO]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="DiscreteRef" url="" version="" build="" crc="54714294" instances="6" view="false" date="0" key="" id="1117385251">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form name="" w="320" h="450" splitter="50">
        <category name="General" visible="true">
          <cond />
          <parameter desc="No. of SubModules/Phase Arm" name="DimDref" group="" unit="" min="2" max="400" content_type="Variable" type="Real" helpmode="Append" intent="Input" dim="1">
            <value><![CDATA[2]]></value>
            <cond />
            <help />
          </parameter>
          <parameter desc="Type of calculation" name="Ctype" group="" type="Choice" helpmode="Append">
            <value><![CDATA[1]]></value>
            <cond>
            </cond>
            <help>
            </help>
            <choice><![CDATA[1 = Range (-1,1)]]></choice>
            <choice><![CDATA[2 = Range (0,2)]]></choice>
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200" size="2">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
        </paramlist>
        <port model="Transfer" name="Vref" x="-54" y="0" dim="1" mode="Input" type="Real" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="n" x="54" y="0" dim="1" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-39" y="-39" width="78" height="78" stroke="Red" stroke-width="0.6" fill-style="Solid" fill-fg="Teal" fill-bg="Black" />
        <line x1="-54" y1="0" x2="-39" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <line x1="-44" y1="-5" x2="-39" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <line x1="-44" y1="5" x2="-39" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <line x1="54" y1="0" x2="39" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <text x="0" y="-17" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[Discretization]]></text>
        <text x="1" y="22" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[Reference]]></text>
        <text x="1" y="2" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[Sinusoidal]]></text>
        <text x="-53" y="-7" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[Ana]]></text>
        <text x="50" y="-8" stroke="Black" font-size="Small" text-anchor="Middle"><![CDATA[Dig]]></text>
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[      #IF (Ctype==1)
      $n=(FLOOR(($Vref+1.0)*0.5*$DimDref+0.5)) ! Waveform is discreterized
      #ELSEIF (Ctype==2)
      $n=(FLOOR(($Vref  )*0.5*$DimDref+0.5)) ! Waveform is discreterized
      #ENDIF]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="UserCmpDefn" name="INICHARGE" url="" version="" build="" crc="62926227" instances="0" key="" view="false" date="0" id="1286477271">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form>
        <category name="General" visible="true">
          <cond />
          <parameter desc="No. of Sub-Modules/Phase Arm" name="DimCh" group="" unit="" min="1" max="400" content_type="Variable" type="Integer" helpmode="Append" intent="Input">
            <value><![CDATA[2]]></value>
            <cond>
            </cond>
            <help>
            </help>
          </parameter>
          <parameter desc="Top/Bottom Leg Charging?" name="TorB" group="" type="Choice" helpmode="Append">
            <value><![CDATA[0]]></value>
            <cond />
            <help />
            <choice><![CDATA[0 = TOP]]></choice>
            <choice><![CDATA[1 = BOTTOM]]></choice>
          </parameter>
        </category>
      </form>
      <svg viewBox="-200 -200 200 200">
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="size" value="0" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
          <param name="monitor_bus_voltage" value="0" />
        </paramlist>
        <port model="Transfer" name="OUT:DimCh" x="54" y="0" dim="0" mode="Output" type="Integer" internal="false"><![CDATA[true]]></port>
        <port model="Transfer" name="IN:DimCh" x="-54" y="0" dim="0" mode="Input" type="Integer" internal="false"><![CDATA[true]]></port>
        <cond><![CDATA[true]]></cond>
        <rect x="-39" y="-39" width="78" height="78" stroke="Fuchsia" stroke-width="0.2" fill-style="Solid" fill-fg="Lime" fill-bg="Black" />
        <text x="0" y="-15" stroke="black" fill="black" font-size="small" text-anchor="Middle">INITIAL</text>
        <text x="0" y="3" stroke="black" fill="black" font-size="small" text-anchor="Middle">CHARGING</text>
        <text x="0" y="21" stroke="black" fill="black" font-size="small" text-anchor="Middle">UNIT</text>
        <line x1="-54" y1="0" x2="-39" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <line x1="-44" y1="-5" x2="-39" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <line x1="-44" y1="5" x2="-39" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <text x="-61" y="-4" stroke="black" fill="black" font-size="small" text-anchor="Middle">IN</text>
        <line x1="54" y1="0" x2="39" y2="0" stroke="Black" stroke-width="0.2" stroke-dasharray="none" />
        <text x="67" y="-5" stroke="black" fill="black" font-size="small" text-anchor="Middle">OUT</text>
        <text x="0" y="33" stroke="black" fill="black" font-size="Small" text-anchor="Middle">%(DimCh)</text>
      </svg>
      <script>
        <segment name="Fortran"><![CDATA[      #LOCAL INTEGER k_ich
      DO k_ich = 1, $DimCh
      	 IF (TIME.LE.0.1) THEN
	   $OUT(k_ich) = $TorB
        ELSE 
	   $OUT(k_ich) = $IN(k_ich)
	 ENDIF
      ENDDO
!
!
! The reason for this time width is that, the diode is forward-biased even if the relevant IGBT is reverse-biased.
! This wait time allows the capacitor to charged and prevent the  diode being initially conducted when the switch is closed.]]></segment>
        <segment name="Branch"><![CDATA[]]></segment>
        <segment name="Computations"><![CDATA[]]></segment>
      </script>
    </Definition>
    <Definition classid="StationDefn" name="Station" url="" version="" build="" crc="36179222" instances="1" key="" view="false" id="168724487">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <schematic classid="StationCanvas" zoomlevel="6" scrollx="0" scrolly="0">
        <Wire classid="WireBranch" name="STUB" x="180" y="180" w="64" h="82" orient="0" id="1352849083" I="0" J="0" K="0" defn="(null):STUB">
          <vertex x="0" y="0" />
          <vertex x="0" y="18" />
          <vertex x="54" y="54" />
          <vertex x="54" y="72" />
          <paramlist>
            <param name="Name" value="" />
            <param name="Date" value="-1" />
          </paramlist>
          <User classid="UserCmp" name="VSC_MMC_Lib:Main" id="1352849083" x="0" y="0" w="0" h="0" z="-1" orient="0" link="1352849083" defn="VSC_MMC_Lib:Main" q="4">
            <paramlist link="-1" name="" />
          </User>
        </Wire>
        <paramlist>
          <param name="show_grid" value="0" />
          <param name="show_boader" value="0" />
          <param name="orient" value="1" />
          <param name="size" value="0" />
        </paramlist>
      </schematic>
    </Definition>
    <Definition classid="UserCmpDefn" name="Main" url="" version="" build="" crc="28973570" instances="1" key="" view="false" date="0" id="1396896687">
      <paramlist name="">
        <param name="Description" value="" />
      </paramlist>
      <form />
      <svg viewBox="-200 -200 200 200">
        <rect x="-36" y="-36" width="72" height="72" stroke="Black" stroke-dasharray="none" stroke-width="0.2" fill-style="Hollow" fill-fg="" fill-bg="" />
        <text x="0" y="0" stroke="Black" fill="Black" font-size="Small"><![CDATA[%:Name]]></text>
      </svg>
      <schematic classid="UserCanvas" zoomlevel="5" scrollx="0" scrolly="251">
        <User classid="UserCmp" name="VSC_MMC_Lib:DiscreteRef" id="448653160" x="918" y="216" w="127" h="82" z="0" orient="0" link="-1" defn="VSC_MMC_Lib:DiscreteRef" q="4">
          <paramlist link="-1" name="">
            <param name="NP" value="2" />
            <param name="DIM" value="2" />
            <param name="DimDref" value="2" />
            <param name="Ctype" value="1" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:InvM" id="168622161" x="180" y="720" w="80" h="35" z="0" orient="0" link="-1" defn="VSC_MMC_Lib:InvM" q="4">
          <paramlist link="-1" name="">
            <param name="DIM" value="24" />
            <param name="DimInv" value="2" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="" id="1330288921" x="918" y="126" w="220" h="18" z="0" orient="0" link="-1" defn="master:annotation" q="4">
          <paramlist link="-1" name="">
            <param name="AL1" value="MULTI-LEVEL WAVEFORM GENERATION" />
            <param name="AL2" value="" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="" id="360177923" x="198" y="666" w="220" h="18" z="0" orient="0" link="-1" defn="master:annotation" q="4">
          <paramlist link="-1" name="">
            <param name="AL1" value="MULTI-DIMENSION SIGNAL INVERTER" />
            <param name="AL2" value="" />
          </paramlist>
        </User>
        <paramlist>
          <param name="show_grid" value="0" modified="true" />
          <param name="show_signal" value="0" />
          <param name="show_virtual" value="0" />
          <param name="show_sequence" value="0" />
          <param name="auto_sequence" value="1" />
          <param name="size" value="1" modified="true" />
          <param name="orient" value="1" />
          <param name="show_border" value="0" />
          <param name="monitor_bus_voltage" value="0" />
          <param name="virtual_filter" value="" />
        </paramlist>
        <User classid="UserCmp" name="" id="376004263" x="324" y="108" w="80" h="18" z="0" orient="0" link="-1" defn="master:annotation" q="4">
          <paramlist link="-1" name="">
            <param name="AL1" value="Half-bridge" />
            <param name="AL2" value="" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:DataMer" id="1271275782" x="486" y="756" w="117" h="76" z="0" orient="0" defn="VSC_MMC_Lib:DataMer" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="DIM_IN1" value="12" />
            <param name="DIM_IN2" value="14" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="" id="878166677" x="486" y="666" w="74" h="18" z="0" orient="0" link="-1" defn="master:annotation" q="4">
          <paramlist link="-1" name="">
            <param name="AL1" value="DATA MERGE" />
            <param name="AL2" value="" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:TimeComparatorX" id="1413838873" x="864" y="900" w="165" h="36" z="0" orient="0" defn="VSC_MMC_Lib:TimeComparatorX" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="" />
          </paramlist>
        </User>
        <Wire classid="WireOrthogonal" name="" x="900" y="378" w="100" h="10" orient="0" id="271551876">
          <vertex x="0" y="0" />
          <vertex x="90" y="0" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="1134" y="342" w="136" h="10" orient="0" id="1053020661">
          <vertex x="0" y="0" />
          <vertex x="126" y="0" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="1242" y="468" w="28" h="82" orient="0" id="1302687582">
          <vertex x="0" y="0" />
          <vertex x="0" y="-72" />
          <vertex x="18" y="-72" />
        </Wire>
        <Wire classid="WireOrthogonal" name="" x="1134" y="378" w="46" h="46" orient="0" id="1359356765">
          <vertex x="0" y="0" />
          <vertex x="36" y="0" />
          <vertex x="36" y="36" />
        </Wire>
        <User classid="UserCmp" name="VSC_MMC_Lib:MultCarrierGen" id="2049857965" x="828" y="378" w="108" h="74" z="0" orient="0" defn="VSC_MMC_Lib:MultCarrierGen" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="FLogic" value="0" />
            <param name="Ps0" value="0.0 [deg]" />
            <param name="PMode" value="1" />
            <param name="DimC" value="10" />
            <param name="Cfreq" value="33" />
            <param name="Type" value="3" />
            <param name="F" value="60 [Hz]" />
            <param name="Max" value="1.0" />
            <param name="Min" value="0.0" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:MDimComparator" id="675603477" x="1062" y="360" w="147" h="79" z="0" orient="0" defn="VSC_MMC_Lib:MDimComparator" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="DimC" value="10" />
            <param name="Type" value="1" />
            <param name="Disp" value="0" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:Sorter" id="1375663708" x="1170" y="468" w="148" h="112" z="0" orient="0" defn="VSC_MMC_Lib:Sorter" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="DimIdx" value="10" />
            <param name="Sorder" value="2" />
            <param name="OutV" value="1" />
            <param name="SType" value="2" />
          </paramlist>
        </User>
        <Sticky classid="Sticky" x="738" y="450" w="180" h="144" colors="10526880, 15792890" id="1644865316" layer="">
          <paramlist>
            <param name="font" value="1" />
            <param name="align" value="0" />
            <param name="style" value="1" />
            <param name="fg_color" value="8388863" />
            <param name="bg_color" value="16777215" />
            <param name="arrows" value="1" />
            <param name="full_font" value="Tahoma, 9pt" />
            <param name="opacity" value="25" />
          </paramlist><![CDATA[This component generates a series of triangular carrier waveforms for PWM operation. 
Synchronism with the fundamental reference waveform can be selected. The angle from a PLL is then required. 
]]></Sticky>
        <User classid="UserCmp" name="VSC_MMC_Lib:FiringBlockVSC" id="687169346" x="1350" y="360" w="211" h="133" z="0" orient="0" defn="VSC_MMC_Lib:FiringBlockVSC" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Config" value="1" />
            <param name="DimFb" value="10" />
            <param name="T_B" value="0" />
            <param name="TBLogic" value="1" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:CMultiplexer" id="1319472181" x="162" y="882" w="94" h="84" z="0" orient="0" defn="VSC_MMC_Lib:CMultiplexer" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="" />
            <param name="IDim" value="200" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:annotation" id="1141266507" x="162" y="810" w="116" h="18" z="0" orient="0" defn="master:annotation" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="AL1" value="Real Multiplexer" />
            <param name="AL2" value="" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:CapEq5New" id="387603819" x="324" y="216" w="112" h="112" z="0" orient="0" defn="VSC_MMC_Lib:CapEq5New" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Config" value="1" />
            <param name="DIM" value="2" />
            <param name="C" value="2500 [uF]" />
            <param name="SumVc0" value="0.0 [kV]" />
            <param name="RP" value="10 [Mohm]" />
            <param name="RTON" value="0.01 [ohm]" />
            <param name="RDON" value="0.01 [ohm]" />
            <param name="RDOFF" value="10[Mohm]" />
            <param name="RTOFF" value="10[Mohm]" />
            <param name="CUR" value="" />
            <param name="Vdiff" value="" />
            <param name="choice" value="0" />
            <param name="DRon" value="1 [ohm]" />
            <param name="DRoff" value="10 [Mohm]" />
            <param name="DR_L" value="1" />
            <param name="text" value="" />
            <param name="text_1" value="" />
            <param name="DRi" value="" />
            <param name="DRe" value="" />
            <param name="Dim" value="2" />
            <param name="DRe_L" value="0" />
            <param name="RDRon" value="1 [ohm]" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:arraymerge" id="913012661" x="486" y="846" w="106" h="41" z="0" orient="0" defn="VSC_MMC_Lib:arraymerge" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Type" value="2" />
            <param name="Disp" value="1" />
            <param name="Index1" value="1" />
            <param name="Dim1" value="2" />
            <param name="Index2" value="1" />
            <param name="Dim2" value="2" />
          </paramlist>
        </User>
        <Sticky classid="Sticky" x="108" y="18" w="306" h="54" colors="0, 15792890" id="1404420419" layer="">
          <paramlist>
            <param name="font" value="2" />
            <param name="align" value="1" />
            <param name="style" value="1" />
            <param name="fg_color" value="255" />
            <param name="bg_color" value="16777215" />
            <param name="arrows" value="0" />
            <param name="full_font" value="Tahoma, 12pt" />
            <param name="opacity" value="25" />
          </paramlist><![CDATA[MMC EQUIVALENT COMPONENTS]]></Sticky>
        <User classid="UserCmp" name="" id="1781146791" x="522" y="108" w="80" h="36" z="0" orient="0" link="-1" defn="master:annotation" q="4">
          <paramlist link="-1" name="">
            <param name="AL1" value="Full-bridge" />
            <param name="AL2" value="(H-bridge)" />
          </paramlist>
        </User>
        <Sticky classid="Sticky" x="828" y="18" w="306" h="54" colors="0, 15792890" id="1983930740" layer="">
          <paramlist>
            <param name="font" value="2" />
            <param name="align" value="1" />
            <param name="style" value="1" />
            <param name="fg_color" value="255" />
            <param name="bg_color" value="16777215" />
            <param name="arrows" value="0" />
            <param name="full_font" value="Tahoma, 12pt" />
            <param name="opacity" value="25" />
          </paramlist><![CDATA[MMC EQUIVALENT
CONTROL COMPONENTS]]></Sticky>
        <Sticky classid="Sticky" id="1824112801" x="1296" y="252" w="126" h="36" colors="0, 15792890" layer="">
          <paramlist>
            <param name="font" value="1" />
            <param name="align" value="0" />
            <param name="style" value="1" />
            <param name="fg_color" value="0" />
            <param name="bg_color" value="16777215" />
            <param name="arrows" value="2" />
            <param name="full_font" value="Tahoma, 9pt" />
            <param name="opacity" value="25" />
          </paramlist><![CDATA[Half-bridge balancing algorithm]]></Sticky>
        <User classid="UserCmp" name="VSC_MMC_Lib:FiringHBridge" id="1545398300" x="1350" y="612" w="211" h="133" z="0" orient="0" defn="VSC_MMC_Lib:FiringHBridge" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="DimFb" value="10" />
            <param name="FrChange" value="0" />
            <param name="FrClk" value="1" />
          </paramlist>
        </User>
        <Sticky classid="Sticky" id="786170616" x="1314" y="504" w="126" h="36" colors="0, 15792890" layer="">
          <paramlist>
            <param name="font" value="1" />
            <param name="align" value="0" />
            <param name="style" value="1" />
            <param name="fg_color" value="0" />
            <param name="bg_color" value="16777215" />
            <param name="arrows" value="2" />
            <param name="full_font" value="Tahoma, 9pt" />
            <param name="opacity" value="25" />
          </paramlist><![CDATA[Full-bridge balancing algorithm]]></Sticky>
        <Line classid="Divider" name="" x="648" y="0" w="0" h="1224" orient="0" id="2033288084">
          <paramlist>
            <param name="state" value="1" />
            <param name="color" value="0" />
            <param name="style" value="0" />
            <param name="weight" value="2" />
            <param name="true-color" value="0" />
          </paramlist>
        </Line>
        <Line classid="Divider" name="" x="648" y="540" w="-630" h="0" orient="0" id="325552466">
          <paramlist>
            <param name="state" value="1" />
            <param name="color" value="0" />
            <param name="style" value="0" />
            <param name="weight" value="2" />
            <param name="true-color" value="0" />
          </paramlist>
        </Line>
        <Sticky classid="Sticky" x="108" y="558" w="306" h="54" colors="0, 15792890" id="230509" layer="">
          <paramlist>
            <param name="font" value="2" />
            <param name="align" value="1" />
            <param name="style" value="1" />
            <param name="fg_color" value="255" />
            <param name="bg_color" value="16777215" />
            <param name="arrows" value="0" />
            <param name="full_font" value="Tahoma, 12pt" />
            <param name="opacity" value="25" />
          </paramlist><![CDATA[MULTI-DIMENSION OPERATORS]]></Sticky>
        <Line classid="Divider" name="" x="1566" y="738" w="-918" h="0" orient="0" id="1131926613">
          <paramlist>
            <param name="state" value="1" />
            <param name="color" value="0" />
            <param name="style" value="0" />
            <param name="weight" value="2" />
            <param name="true-color" value="0" />
          </paramlist>
        </Line>
        <Sticky classid="Sticky" x="702" y="774" w="306" h="54" colors="0, 15792890" id="648628169" layer="">
          <paramlist>
            <param name="font" value="2" />
            <param name="align" value="1" />
            <param name="style" value="1" />
            <param name="fg_color" value="255" />
            <param name="bg_color" value="16777215" />
            <param name="arrows" value="0" />
            <param name="full_font" value="Tahoma, 12pt" />
            <param name="opacity" value="25" />
          </paramlist><![CDATA[OTHER COMPONENTS]]></Sticky>
        <User classid="UserCmp" name="VSC_MMC_Lib:breakout3" id="2046773023" x="1080" y="900" w="40" h="45" z="0" orient="0" defn="VSC_MMC_Lib:breakout3" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="master:annotation" id="1891534910" x="1080" y="846" w="122" h="18" z="0" orient="0" defn="master:annotation" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="AL1" value="2 to 1,1 breakout" />
            <param name="AL2" value="" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:AndMdim" id="1189774476" x="162" y="1008" w="76" h="52" z="0" orient="0" defn="VSC_MMC_Lib:AndMdim" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="" />
            <param name="Dim" value="1" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:ConstantMDimInt" id="1509009876" x="162" y="1206" w="69" h="31" z="0" orient="0" defn="VSC_MMC_Lib:ConstantMDimInt" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Dimx" value="38" />
            <param name="Value" value="0" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:NegationMdim" id="1361055242" x="252" y="720" w="40" h="40" z="0" orient="0" defn="VSC_MMC_Lib:NegationMdim" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="" />
            <param name="Dim" value="1" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:OrMdim" id="1052055386" x="288" y="1008" w="76" h="52" z="0" orient="0" defn="VSC_MMC_Lib:OrMdim" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="" />
            <param name="Dim" value="1" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="" id="253426290" x="162" y="954" w="60" h="18" z="0" orient="0" link="-1" defn="master:annotation" q="4">
          <paramlist link="-1" name="">
            <param name="AL1" value="AND GATE" />
            <param name="AL2" value="" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="" id="654360641" x="288" y="954" w="52" h="18" z="0" orient="0" link="-1" defn="master:annotation" q="4">
          <paramlist link="-1" name="">
            <param name="AL1" value="OR GATE" />
            <param name="AL2" value="" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="" id="2018319025" x="162" y="1152" w="60" h="36" z="0" orient="0" link="-1" defn="master:annotation" q="4">
          <paramlist link="-1" name="">
            <param name="AL1" value="INTEGER" />
            <param name="AL2" value="CONSTANT" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:ANDM" id="1405652917" x="216" y="1098" w="119" h="62" z="0" orient="0" defn="VSC_MMC_Lib:ANDM" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Type1" value="1" />
            <param name="DIM" value="10" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:ConstantMDimRE" id="2014770646" x="288" y="1206" w="69" h="31" z="0" orient="0" defn="VSC_MMC_Lib:ConstantMDimRE" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Dimx" value="38" />
            <param name="ValueRe" value="0.0" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="" id="725624757" x="288" y="1152" w="60" h="36" z="0" orient="0" link="-1" defn="master:annotation" q="4">
          <paramlist link="-1" name="">
            <param name="AL1" value="REAL" />
            <param name="AL2" value="CONSTANT" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:PIwithFreeze" id="881631016" x="846" y="1062" w="84" h="79" z="0" orient="0" defn="VSC_MMC_Lib:PIwithFreeze" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="" />
            <param name="Kp" value="1" />
            <param name="Ti" value="0.01 [s]" />
            <param name="MaxOut" value="100" />
            <param name="MinOut" value="-100" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:MDim_Select" id="682558795" x="1098" y="1044" w="84" h="88" z="0" orient="0" defn="VSC_MMC_Lib:MDim_Select" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="" />
            <param name="dim" value="10" />
            <param name="Sel" value="1" />
            <param name="Ntype" value="1" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:abc2AB" id="431121231" x="1296" y="1062" w="112" h="63" z="0" orient="0" defn="VSC_MMC_Lib:abc2AB" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="choice" value="2" />
            <param name="Type" value="2" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:InvClarke" id="1585117386" x="1296" y="954" w="111" h="62" z="0" orient="0" defn="VSC_MMC_Lib:InvClarke" link="-1" q="4">
          <paramlist link="-1" name="" />
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:FullCellR_n" id="227467585" x="522" y="216" w="130" h="94" z="0" orient="0" defn="VSC_MMC_Lib:FullCellR_n" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="DimC" value="2" />
            <param name="C" value="2000 [uF]" />
            <param name="Ron" value="0.01" />
            <param name="Roff" value="1.0e6" />
            <param name="R5" value="1.0e8 [ohm]" />
            <param name="SumVc0" value="0.0 [kV]" />
            <param name="choice" value="0" />
            <param name="BPS_L" value="0" />
            <param name="BRon" value="0.001  [ohm]" />
            <param name="BRoff" value="1.0e7 [ohm]" />
            <param name="RDon" value="0.01" />
            <param name="RDoff" value="1.0e6" />
            <param name="RIon" value="0.01" />
            <param name="RIoff" value="1.0e6" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:Hyst_MDim" id="1052842201" x="1296" y="1170" w="112" h="40" z="0" orient="0" defn="VSC_MMC_Lib:Hyst_MDim" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="" />
            <param name="Dim" value="2" />
            <param name="Loff" value="1.0" />
            <param name="Lon" value="2.0" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:FullCellR_n_Sdt" id="1401134285" x="522" y="378" w="130" h="109" z="0" orient="0" defn="VSC_MMC_Lib:FullCellR_n_Sdt" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="DimC" value="2" />
            <param name="RDon" value="0.01" />
            <param name="RDoff" value="1.0e6" />
            <param name="C" value="2000 [uF]" />
            <param name="RIon" value="0.01" />
            <param name="RIoff" value="1.0e6" />
            <param name="R5" value="1.0e8 [ohm]" />
            <param name="SumVc0" value="0.0 [kV]" />
            <param name="BPS_L" value="0" />
            <param name="BRon" value="0.001  [ohm]" />
            <param name="BRoff" value="10e7  [ohm]" />
            <param name="RBSon" value="0.001  [ohm]" />
            <param name="RBSoff" value="1.0e7 [ohm]" />
          </paramlist>
        </User>
        <Sticky classid="Sticky" id="1161755778" x="36" y="324" w="180" h="126" colors="0, 15792890" layer="">
          <paramlist>
            <param name="font" value="1" />
            <param name="align" value="0" />
            <param name="style" value="1" />
            <param name="fg_color" value="0" />
            <param name="bg_color" value="16777215" />
            <param name="arrows" value="8" />
            <param name="full_font" value="Tahoma, 9pt" />
            <param name="opacity" value="25" />
          </paramlist><![CDATA[Use these components when modeling dead times between firing pulses or when it is desired to model partial blocking]]></Sticky>
        <User classid="UserCmp" name="VSC_MMC_Lib:HalfCell_Sdt" id="508867103" x="324" y="378" w="112" h="111" z="-1" orient="0" defn="VSC_MMC_Lib:HalfCell_Sdt" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Dim" value="2" />
            <param name="C" value="2500 [uF]" />
            <param name="SumVc0" value="0.0 [kV]" />
            <param name="RP" value="10 [Mohm]" />
            <param name="RTON" value="0.01 [ohm]" />
            <param name="RDON" value="0.01 [ohm]" />
            <param name="RDOFF" value="10[Mohm]" />
            <param name="RTOFF" value="10[Mohm]" />
            <param name="CUR" value="" />
            <param name="Vdiff" value="" />
            <param name="Config" value="1" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:MaxDim" id="218342376" x="1098" y="1152" w="112" h="55" z="-1" orient="0" defn="VSC_MMC_Lib:MaxDim" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="" />
            <param name="Dim" value="2" />
            <param name="MLogic" value="1" />
            <param name="Disp" value="1" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:PI_AntiWindUp" id="899469585" x="846" y="1170" w="84" h="79" z="-1" orient="0" defn="VSC_MMC_Lib:PI_AntiWindUp" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Name" value="" />
            <param name="Kp" value="1" />
            <param name="Ti" value="0.01 [s]" />
            <param name="Kaw" value="1" />
            <param name="MaxOut" value="100" />
            <param name="MinOut" value="-100" />
          </paramlist>
        </User>
        <User classid="UserCmp" name="VSC_MMC_Lib:MovAvg" id="1140591803" x="846" y="1260" w="76" h="27" z="-1" orient="0" defn="VSC_MMC_Lib:MovAvg" link="-1" q="4">
          <paramlist link="-1" name="">
            <param name="Freq" value="50.0 [Hz]" />
          </paramlist>
        </User>
      </schematic>
      <references>
        <using namespace="VSC_MMC_Lib" />
        <using namespace="master" />
      </references>
    </Definition>
  </definitions>
  <paramlist name="Validation" />
  <paramlist name="Libs">
    <param name="0" value="Obj_Files_2016_03_25\$(Compiler)\MMC_2016_03_25_Exp.obj" />
  </paramlist>
  <layers />
  <Layers />
  <hierarchy>
    <call link="1174406591" name="VSC_MMC_Lib:Station" z="-1" view="false" instance="0">
      <call link="1352849083" name="VSC_MMC_Lib:Main" z="-1" view="true" instance="0">
        <call link="899469585" name="VSC_MMC_Lib:PI_AntiWindUp" z="-1" view="false" instance="0" />
        <call link="881631016" name="VSC_MMC_Lib:PIwithFreeze" z="0" view="false" instance="0" />
      </call>
    </call>
  </hierarchy>
</project>